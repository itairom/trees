{"version":3,"sources":["serviceWorker.js","reducers/TreeReducer.js","services/httpService.js","services/userService.js","reducers/AppReducer.js","assets/svg/menu_black_24dp.svg","services/storageService.js","cmps/UserInfo.jsx","actions/appActions.js","cmps/AppHeader.jsx","pages/About.jsx","cmps/TreesImages.jsx","services/treeService.js","cmps/table/TreesTypesTable.jsx","services/customHooks.js","cmps/table/TreesTable.jsx","cmps/table/TreeRecommendationTable.jsx","pages/FinalSurvey.jsx","actions/TreeActions.js","pages/CreateSurvey.jsx","pages/ChooseSurvey.jsx","services/formService.js","cmps/FormAutocomplete.jsx","cmps/form/input.jsx","cmps/form/FormModal.jsx","services/cloudinaryService.js","cmps/ImgUpload.jsx","cmps/TreesForm.jsx","cmps/TreePreview.jsx","pages/SurveyEditor.jsx","pages/TreeUpdate.jsx","pages/Home.jsx","cmps/Login.jsx","cmps/Signup.jsx","App.js","index.js"],"names":["Boolean","window","location","hostname","match","initialState","filterBy","isDark","currentSurvey","isTreePreviewShowen","axios","Axios","create","withCredentials","httpService","endpoint","data","ajax","a","method","url","params","res","response","status","assign","userService","login","logout","signup","updateUser","getLoggedinUser","JSON","parse","sessionStorage","getItem","getOnlineUsers","getUsers","getById","googleLogin","credentials","user","_saveLocalUser","tokenId","userInfo","clear","id","setItem","stringify","users","onlineUsers","reduce","acc","isOnline","push","_id","console","log","userId","workspace","loggedInUser","loginErr","currPopover","elPos","name","props","isOverlayOpen","_path","_path2","_excluded","_extends","Object","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref","svgRef","title","createElement","height","viewBox","width","fill","ref","d","ForwardRef","forwardRef","storageService","loadFromStorage","val","localStorage","saveToStorage","UserInfo","useState","isShowUserInfo","setIsShowUserInfo","useSelector","state","appModule","dispatch","useDispatch","useEffect","type","onClick","className","username","href","to","src","alt","AppHeader","isMobile","setIsMobile","localSurveyId","setLocalSurveyId","TreeModule","headerRef","useRef","storageId","changeMobile","prev","surveyTitle","About","TreesImages","trees","map","tree","idx","imgUrl","then","tableId","treeId","removedTree","surveyId","treeService","save","queryTrees","querySurveyIdList","querySurveyTrees","removeTree","getTreeById","finalSurveyNote","TreesTypesTable","treeTypeObj","setTreeTypeObj","treeTypeKeysArr","setTreeTypeKeysArr","totalvaluesArr","setTotalvaluesArr","mapTreeValue","ValueColor","sum","canopy","health","typeValue","calculateValue","localTotalvaluesArr","lowPriority","mediumPriority","highPriority","veryHighPriority","typeObj","NTL","label","value","treeKeys","objToArr","values","b","useForm","initialFValues","validateOnChange","validate","setValues","errors","setErrors","handleInputChange","ev","checked","resetForm","useHandleModal","cb","fields","setFields","field","prevFields","TreesTable","onRemoveTree","draggableTrees","setDraggableTrees","history","useHistory","windowSize","isClient","getSize","innerWidth","undefined","innerHeight","setWindowSize","handleResize","addEventListener","removeEventListener","useWindowSize","calculateTreeValue","Math","pow","diameter","quantity","toFixed","calculatePalmTreeValue","onDragEnd","result","destination","items","Array","from","splice","index","reorderItem","droppableId","provided","droppableProps","innerRef","draggableId","style","backgroundColor","position","draggableProps","dragHandleProps","rootsDiameter","isPalmTree","movingPossibility","description","recommendation","movingReason","table","filename","sheet","buttonText","aria-multiline","TreeRecommendationTable","recommendationTable","setRecommendationTable","sumRecommendations","recArr","preserve","relocation","amputation","notDefined","total","forEach","rec","recLabelConvert","numToPercentage","FinalSurvey","setTrees","setTableIdList","loggedinUser","_setCurrentSurvey","survey","setCurrentSurvey","CreateSurvey","handleOnClick","useCallback","useFormCreateSurvey","surveyDate","surveySummary","handleChange","addNewSurvey","action","htmlFor","onSubmit","preventDefault","onChange","placeholder","min","max","ChooseSurvey","surveyIdList","setSurveyIdList","currentSurveyId","setCurrentSurveyId","handleOnClickNext","handleOnClickBack","handleOnClickCreate","resp","filterdList","filter","FormControl","InputLabel","required","Select","variant","color","MenuItem","formService","treeTypes","palmstreeTypes","recomandationOptions","FormAutocomplete","onSetTreeType","options","useImperativeHandle","onResetAutocomplete","setTreeObj","setSearch","display","setDisplay","search","treeObj","autoComplete","option","includes","v","treeset","Input","error","InputProps","multiline","rows","TextField","helperText","FormModal","HandleiIsModalShown","modal","imgSrc","isShowen","cloudinaryService","uploadImg","files","UPLOAD_URL","formData","FormData","append","fetch","body","json","catch","err","ImgUpload","onGetImgUrl","isUpload","setIsUpload","images","setImages","file","secure_url","imageList","addUpdateIndex","maxNumber","dataURLKey","stopPropagation","onImageUpload","isDragging","onImageRemoveAll","onImageUpdate","onImageRemove","dragProps","image","data_url","TreesForm","setSurveyId","treeTypeOptions","setTreeTypeOptions","treeType","setType","setImgUrl","childRef","fieldValues","temp","isLessThenFiveInput","isEmptyInput","mobile","every","x","isAddingTree","isModalShown","HandleIsModalShown","submitForm","alert","treeCopy","current","inputsRef","document","querySelectorAll","textareaRef","input","textarea","onResetForm","scrollTo","dir","setIsPalmTree","inputProps","img","Button","TreePreview","isRemove","setIsRemove","e","SurveyEditor","setIsAddingTree","currentSurveyTrees","setCurrentSurveyTrees","currentPreviewTree","setCurrentPreviewTree","localCurrentSurvey","setLocalCurrentSurvey","storageTreeId","TreeUpdate","useParams","setTree","treeById","setInputRef","setTextAreaRef","mergeTree","goBack","marginBottom","Home","Login","storageLocalUser","onLogin","Yup","password","initialValues","validationSchema","component","autoFocus","Signup","fullname","onSignup","App","path","rootReducer","combineReducers","popoverName","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e4265dfe.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}","\r\nconst initialState = {\r\n    filterBy: null,\r\n    isDark: false,\r\n    currentSurvey:null,\r\n    isTreePreviewShowen:false\r\n}\r\n\r\nexport default function TreeReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_CURRENT_SURVEY':\r\n            return {\r\n                ...state,\r\n                currentSurvey: action.survey\r\n            }\r\n\r\n        case 'TOGGLE_DARK':\r\n            console.log('toggle');\r\n            return {\r\n                ...state,\r\n                isDark: !state.isDark\r\n            }\r\n        case 'TOGGLE_IS_PREVIEW_TREE':\r\n            return {\r\n                ...state,\r\n                isTreePreviewShowen: !state.isTreePreviewShowen\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}","import Axios from 'axios'\r\n\r\nconst BASE_URL = (process.env.NODE_ENV === 'production') ? '/api/' : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data,\r\n            params: (method === 'GET') ? data : null\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        if (err.response && err.response.status === 401) {\r\n            window.location.assign('/#/login')\r\n        }\r\n        throw err\r\n    }\r\n}","\nimport { httpService } from './httpService'\n\nexport const userService = {\n    login,\n    logout,\n    signup,\n    updateUser,\n    getLoggedinUser,\n    getOnlineUsers,\n    getUsers,\n    getById,\n    googleLogin\n}\n\nasync function login(credentials) {\n    try {\n        const user = await httpService.post('auth/login', credentials)\n        if (user) return _saveLocalUser(user)\n    } catch (err) {\n        throw err\n    }\n}\n\nasync function googleLogin(tokenId) {\n    try {\n        const user = await httpService.post('auth/googlelogin', { tokenId })\n        if (user) return _saveLocalUser(user)\n    } catch (err) {\n        throw err\n    }\n}\n\nasync function signup(userInfo) {\n    try {\n        const user = await httpService.post('auth/signup', userInfo)\n        return _saveLocalUser(user)\n    } catch (err) {\n        throw err\n    }\n}\n\nasync function logout(user) {\n    try {\n        sessionStorage.clear()\n        return await httpService.post('auth/logout', user)\n    } catch (err) {\n        throw err\n    }\n}\n\nasync function updateUser(user) {\n    try {\n        await httpService.put(`user/${user.id}`, user)\n    } catch (err) {\n        throw err\n    }\n}\n\nfunction _saveLocalUser(user) {\n    sessionStorage.setItem('loggedinUser', JSON.stringify(user))\n    return user\n}\n\nfunction getLoggedinUser() {\n    let user = JSON.parse(sessionStorage.getItem('loggedinUser' || null));\n    return user\n}\n\nasync function getOnlineUsers() {\n    try {\n        const users = await getUsers()\n        const onlineUsers = users.reduce((acc, user) => {\n            if (user.isOnline) {\n                acc.push(user._id)\n            }\n            return acc\n        }, [])\n        return onlineUsers\n    } catch (err) {\n        console.log(err)\n    }\n}\n\nasync function getUsers() {\n    try {\n        return await httpService.get(`user`)\n    } catch (err) {\n        throw err\n    }\n}\n\nasync function getById(userId) {\n    try {\n        return httpService.get(`user/${userId}`)\n    } catch (err) {\n        throw err\n    }\n}\n\n\n","import { userService } from '../services/userService'\n\nconst initialState = {\n    workspace: [],\n    // loggedInUser: userService.getLoggedinUser(),\n    loggedInUser: {\"username\":\"itairom\"},\n    onlineUsers: [],\n    loginErr: null,\n    currPopover: {\n        elPos: null,\n        name: '',\n        props: null\n    },\n    isOverlayOpen: false,\n}\n\nexport function AppReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_USER':\n            return { ...state, loggedInUser: action.user, loginErr: null }\n        case 'SET_ONLINE_USERS':\n            return { ...state, onlineUsers: [...action.onlineUsers] }\n        case 'LOGIN_ERR':\n            return { ...state, loginErr: action.err }\n        case 'SET_POPOVER':\n            return { ...state, currPopover: { name: action.popoverName, elPos: action.elPos, props: action.props }, isOverlayOpen: true }\n        case 'CLOSE_POPOVER':\n            return { ...state, currPopover: { name: '', elPos: null, props: null }, isOverlayOpen: false }\n        default:\n            return state\n    }\n}","var _path, _path2;\n\nvar _excluded = [\"svgRef\", \"title\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgMenuBlack24Dp = function SvgMenuBlack24Dp(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    fill: \"#000000\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"\n  })));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMenuBlack24Dp, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/menu_black_24dp.8684d03d.svg\";\nexport { ForwardRef as ReactComponent };","function loadFromStorage(key) {\r\n    var val = localStorage.getItem(key)\r\n    return (val) ? JSON.parse(val) : null;\r\n}\r\n\r\nfunction saveToStorage(key, val) {\r\n    localStorage[key] = JSON.stringify(val);\r\n}\r\n\r\n\r\nexport const storageService = {\r\n    loadFromStorage,\r\n    saveToStorage\r\n}","import React, { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { onLogout } from \"../actions/appActions\";\nimport { storageService } from \"../services/storageService\";\n\n\nexport function UserInfo() {\n\n    const [isShowUserInfo, setIsShowUserInfo] = useState(false)\n\n    const { loggedInUser, loginErr } = useSelector(state => state.appModule)\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        console.log('loginErr', loginErr);\n    }, [loginErr])\n\n    const logout = () => {\n        storageService.saveToStorage('surveyId', null) // Reset current survey\n        dispatch(onLogout(loggedInUser))\n    }\n\n    return (\n        <div onClick={() => { setIsShowUserInfo(!isShowUserInfo) }} className=\"login-profile\">\n            {isShowUserInfo &&\n                <div className=\"user-dropdown\">\n                    <div className=\"dropdown-list\">\n                        <p>{loggedInUser?.username}</p>\n                        {(loggedInUser) &&\n                            <div className=\"\">\n                                {/* <Link to='/profile' >\n                                    <span>Profile</span>\n                                </Link> */}\n                            </div>\n                        }\n                        {(loggedInUser) &&\n                            <a href=\"\" onClick={() => logout()}>Logout</a>\n                        }\n                        {(!loggedInUser) && <Link to='/login' >\n                            <span>Login</span>\n                        </Link>}\n                    </div>\n                </div>}\n            <img className=\"profile-icon\" src=\"./imgs/header/user.svg\" alt=\"icon\" />\n        </div>\n        // <div className=\"user-info flex column grey\">\n        //     <p>{loggedInUser?.username}</p>\n        //     {!loggedInUser && <NavLink to=\"/login\">התחבר</NavLink>}\n        //     {loggedInUser && <button onClick={() => { logout() }}>Logout</button>}\n        // </div>\n    )\n}\n","import { userService } from '../services/userService.js'\n// import { socketService } from '../../services/socket.service.js'\n\nexport function onGoogleLogin(tokenId) {\n    return async dispatch => {\n        try {\n            const user = await userService.googleLogin(tokenId)\n            dispatch({ type: 'SET_USER', user })\n            // socketService.emit('user-watch', user._id)\n        } catch (err) {\n            console.log('UserActions: err in login', err)\n        }\n    }\n}\n\nexport function onLogin(credentials) {\n    \n    return async dispatch => {\n        try {\n            const user = await userService.login(credentials)\n            dispatch({ type: 'SET_USER', user })\n            // socketService.emit('user-watch', user._id)\n        } catch (error) {\n            console.log(error.response)\n            const { err } = error.response.data\n            dispatch({ type: 'LOGIN_ERR', err })\n        }\n    }\n}\n\nexport function onSignup(userInfo) {\n    return async dispatch => {\n        try {\n            const user = await userService.signup(userInfo)\n            dispatch({ type: 'SET_USER', user })\n        } catch (err) {\n            console.log('UserActions: err in signup', err)\n        }\n    }\n}\n\nexport function onLogout(user) {\n    return async dispatch => {\n        try {\n            // socketService.emit('user endSession', user._id)\n            await userService.logout(user)\n            // dispatch({ type: 'UPDATE_ONLINE_USERS', userId })\n            dispatch({ type: 'SET_USER', user: null })\n        } catch (err) {\n            console.log('UserActions: err in logout', err)\n        }\n    }\n}\n\nexport function openPopover(popoverName, elPos, props) {\n    return dispatch => {\n        const action = {\n            type: 'SET_POPOVER',\n            popoverName,\n            elPos,\n            props\n        }\n        dispatch(action)\n    }\n}\n\nexport function closePopover() {\n    return dispatch => {\n        const action = {\n            type: 'CLOSE_POPOVER',\n        }\n        dispatch(action)\n    }\n}\n\nexport function updateOnlineUsers(onlineUsers) {\n    return async dispatch => {\n        try {\n            dispatch({ type: 'SET_ONLINE_USERS', onlineUsers })\n        } catch (err) {\n            console.log('UserActions: err in login', err)\n        }\n    }\n}\n","import React, { useEffect, useState } from 'react'\r\nimport { useRef } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { ReactComponent as Menu } from '../assets/svg/menu_black_24dp.svg'\r\nimport { storageService } from '../services/storageService'\r\nimport { UserInfo } from './UserInfo'\r\n\r\n\r\nexport function AppHeader() {\r\n    const [isMobile, setIsMobile] = useState(false)\r\n    // const [isShowUserInfo, setIsShowUserInfo] = useState(false)\r\n    const [localSurveyId, setLocalSurveyId] = useState(null)\r\n    const { currentSurvey } = useSelector(state => state.TreeModule)\r\n    const { loggedInUser } = useSelector(state => state.appModule)\r\n    const headerRef = useRef()\r\n\r\n    useEffect(() => {\r\n        // window.addEventListener('scroll', handleScroll)\r\n        let storageId = storageService.loadFromStorage('surveyId')\r\n        if (storageId) {\r\n            setLocalSurveyId(storageId)\r\n        }\r\n\r\n        return () => {\r\n            // window.removeEventListener('scroll', handleScroll)\r\n        }\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (currentSurvey) {\r\n            setLocalSurveyId(currentSurvey)\r\n        }\r\n    }, [currentSurvey])\r\n\r\n    const handleScroll = () => {\r\n        if (window.pageYOffset > 40) {\r\n            headerRef.current.className = 'main-nav fixed'\r\n        } else {\r\n            headerRef.current.className = 'main-nav'\r\n        }\r\n    }\r\n\r\n    const changeMobile = () => {\r\n        setIsMobile(prev => prev = !prev)\r\n    }\r\n\r\n    return (\r\n        <header className=\"app-header\">\r\n            <nav ref={headerRef} className=\"main-nav\">\r\n                { !isMobile && <div className=\"left-nav \">\r\n                {/* {loggedInUser && !isMobile && <div className=\"left-nav \"> */}\r\n                    <p className=\"current-survey\"><span>סקר</span> {localSurveyId?.surveyTitle}</p>\r\n                    <Link to='/trees'><span>סקר סופי</span></Link>\r\n                    <Link to='/'><span>בחר סקר</span></Link>\r\n                    {localSurveyId && <Link to='/survey_editor'><span>הוספת עץ</span></Link>}\r\n                </div>}\r\n                {isMobile && <div onClick={changeMobile} className=\"mobile-nav\">\r\n                    <p>סקר <span>{localSurveyId?.surveyTitle}</span></p>\r\n                    <Link to='/trees'><span>סקר סופי</span></Link>\r\n                    <Link to='/'><span>בחר סקר</span></Link>\r\n                    {localSurveyId && <Link to='/survey_editor'><span>הוספת עץ</span></Link>}\r\n                </div>}\r\n                {isMobile && <div className=\"background-menu\" onClick={changeMobile}></div>}\r\n                <Menu onClick={changeMobile} className=\"menu-btn\" />\r\n                <div className=\"right-nav\">\r\n                    <UserInfo />\r\n                </div>\r\n            </nav>\r\n        </header>\r\n    )\r\n}\r\n","import React from 'react'\n\nexport const About = () => {\n\n    return (\n        <section className=\"main-container \">\n            <h1>About</h1>\n        </section>\n    )\n}","import React from \"react\"\n\nexport const TreesImages = (...props) => {\n\n    const { trees } = props[0]\n    return (\n        <section className=\"trees-images flex\">\n            {trees.map((tree) => {\n                return (\n                    <div key={tree._id} className=\"image-card pointer\">\n                        <p >{tree.idx}</p>\n                        {tree.imgUrl !== '' && <img key={tree._id} src={tree.imgUrl} alt=\"tree\" />}\n                        {tree.imgUrl === '' && <img key={tree._id} src=\"imgs/tree_silhouette.png\" alt=\"tree\" />}\n                    </div>\n                )\n            })}\n        </section>\n\n    )\n}","import { httpService } from \"./httpService\"\n\n\nasync function save(tree, user) {\n    await httpService.put(`tree/save`, [tree, user])\n        .then((res) => {\n            console.log(res);\n        })\n\n}\nasync function queryTrees(tableId, username) {\n    let trees = await httpService.get(`tree/`, [tableId, username])\n    return trees\n}\nasync function getTreeById(treeId, username) {\n    let tree = await httpService.get(`tree/${treeId}&${username}`)\n    return tree\n}\nasync function removeTree(treeId, username) {\n    let removedTree = await httpService.delete(`tree/${treeId}&${username}`)\n    return removedTree\n}\n\nasync function querySurveyIdList(loggedInUser) {\n    let trees = await httpService.get(`tree/survey_id_list`, loggedInUser)\n    return trees\n}\nasync function querySurveyTrees(surveyId, username) {\n    let trees = await httpService.get(`tree/survey_trees`, [surveyId, username])\n    return trees\n}\n\n// async function update(pet) {\n//     let updatedPet = await httpService.put(`pet/${pet._id}`, pet)\n//     return updatedPet\n// }\n\nconst finalSurveyNote = () => {\n    return (\n        `<div>\n1 סקר זה הינו סקר נופי אגרונומי ואינו סקר הערכת סיכונים/סקר בטיחות.\n . 2 אין לבצע את כריתת/העתקת העצים המומלצים אלא לאחר קבלת רישיון כריתה כחוק - מפקיד היערות העירוני.\n . 3 כל פעולה העלולה לגרום מוות לעץ (כולל פגיעה/חיתוך שורשיו) – נחשבת עפ\"י החוק ככריתה ללא היתר.\n . 4 עץ המוגדר לשימור – אין לבצע עבודות גיזום נוף/גיזום שורשים - ללא תאום עם הח\"מ.\n . 5 עץ המוגדר לשימור – אין לבצע עבודות חפירה ו/או מילוי במרחק הקטן מ 3 - מ' מקצה גזע העץ – ללא תאום עם הח\"מ.\n . 6 תוקף הסקר 6 חודשים מביצוע הסק הרי בשטח.\n . 7 עצים המאושרים לכריתה, יינטעו תמורתם עצים באותו הערך – כפיצוי נופי.\n . 8 מספר העצים בהתאם לתכנית הסקר , יבוצע מייד עם הכניסה לביצוע העבודות באתר – הסימון יאושר ע\"י המפקח והאגרונום.\n . 9 כל העצים יסומנו ויוגנו בהתאם לפרט בגוף התכנית , טרם תחילת העבודות באתר.\n .10 להלן תמונות העצים.\n .11 מצ\"ב מפת הסקר כולל סימון העצים ומספורם.\n</div>`\n    )\n}\n\n\n\nexport const treeService = {\n    save,\n    queryTrees,\n    querySurveyIdList,\n    querySurveyTrees,\n    removeTree,\n    getTreeById,\n    finalSurveyNote\n}","import React, { useEffect, useState } from \"react\"\n\nexport const TreesTypesTable = ({ trees }) => {\n\n    const [treeTypeObj, setTreeTypeObj] = useState([])\n    const [treeTypeKeysArr, setTreeTypeKeysArr] = useState([])\n    const [totalvaluesArr, setTotalvaluesArr] = useState({})\n\n    useEffect(() => {\n        mapTreeValue(trees)\n    }, [trees])\n\n\n    const calculateValue = (tree) => {\n        const { canopy, location, health } = tree\n        const { typeValue } = tree.type\n        return (+canopy + +typeValue + +location + +health)\n    }\n\n    const ValueColor = (tree) => {\n        let sum = calculateValue(tree)\n        if (sum <= 6) return 'lowPriority'\n        else if (sum > 6 && 14 > sum) return 'mediumPriority'\n        else if (sum > 13 && 17 > sum) return 'highPriority'\n        else return 'veryHighPriority'\n    }\n\n\n    const getTotalvaluesArr = () => {\n        return (\n            {\n                lowPriority: 0,\n                mediumPriority: 0,\n                highPriority: 0,\n                veryHighPriority: 0\n            }\n        )\n    }\n\n\n    const mapTreeValue = (trees) => { // improve the code!\n        let localTotalvaluesArr = getTotalvaluesArr()\n        let typeObj = {}\n        for (let i = 0; i < trees.length; i++) {\n            let NTL = trees[i].type.label\n            let value = ValueColor(trees[i])\n            if (!typeObj.hasOwnProperty(NTL)) {\n                let NTL = trees[i].type.label\n                typeObj[NTL] = {\n                    'highPriority': 0,\n                    'lowPriority': 0,\n                    'mediumPriority': 0,\n                    'veryHighPriority': 0,\n                    'total': 0\n                }\n            }\n            ++localTotalvaluesArr[value]\n            ++typeObj[NTL][value]\n            ++typeObj[NTL]['total']\n        }\n\n        const treeKeys = Object.keys(typeObj)\n        const objToArr = Object.values(typeObj)\n        setTreeTypeObj(objToArr)\n        setTreeTypeKeysArr(treeKeys)\n        setTotalvaluesArr(localTotalvaluesArr)\n    }\n\n    return (\n        <section className=\"trees-table flex\">\n            <table>\n                <thead>\n                    <tr key=\"tree-type-header\">\n                        <th className=\"white\">מין העץ/תאור\n                            הפוליגון</th>\n                        <th className=\"red\">ערכיות גבוהה מאוד **</th>\n                        <th className=\"green\">ערכיות גבוהה **</th>\n                        <th className=\"grey\">ערכיות בינונית **</th>\n                        <th className=\"yellow\">ערכיות נמוכה **</th>\n                        <th className=\"white\">סה״כ</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {treeTypeKeysArr && treeTypeObj?.map((tree, idx) => {\n                        return (\n                            <tr key={'tree-type-' + idx}>\n                                {<td>{treeTypeKeysArr[idx]}</td>}\n                                {<td>{tree['veryHighPriority']}</td>}\n                                {<td>{tree['highPriority']}</td>}\n                                {<td>{tree['mediumPriority']}</td>}\n                                {<td>{tree['lowPriority']}</td>}\n                                {<td>{tree['total']}</td>}\n                            </tr>\n                        )\n                    })}\n                    <tr key='total-values'>\n                        {<td>סה״כ</td>}\n                        {<td>{totalvaluesArr['veryHighPriority']}</td>}\n                        {<td>{totalvaluesArr['highPriority']}</td>}\n                        {<td>{totalvaluesArr['mediumPriority']}</td>}\n                        {<td>{totalvaluesArr['lowPriority']}</td>}\n                        {<td>{Object.values(totalvaluesArr).reduce((a, b) => a + b, 0)}</td>}\n                    </tr>\n                </tbody>\n            </table>\n        </section>\n    )\n\n\n}\n","import { useEffect, useState } from 'react'\r\n\r\nexport function useForm(initialFValues, validateOnChange = false, validate) {\r\n  const [values, setValues] = useState(initialFValues);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const handleInputChange = ev => {\r\n    const { name } = ev.target\r\n    let value = (ev.target.type === 'number') ? +ev.target.value : ev.target.value\r\n    value = (ev.target.type === 'checkbox') ? ev.target.checked : value\r\n    setValues({\r\n      ...values,\r\n      [name]: value\r\n    })\r\n    if (validateOnChange)\r\n      validate({ [name]: value })\r\n  }\r\n\r\n  const resetForm = () => {\r\n    setValues(initialFValues);\r\n    setErrors({})\r\n  }\r\n\r\n  return {\r\n    values,\r\n    setValues,\r\n    errors,\r\n    setErrors,\r\n    handleInputChange,\r\n    resetForm\r\n  }\r\n}\r\n\r\nexport const useFormCreateSurvey = (initialState, cb = () => { }) => {\r\n  const [fields, setFields] = useState(initialState)\r\n  // const [errors, setErrors] = useState({});\r\n\r\n  useEffect(() => {\r\n    cb(fields)\r\n\r\n  }, [fields,cb])\r\n\r\n  return [\r\n\r\n    fields,\r\n    function (ev) {\r\n\r\n      const field = ev.target.name\r\n      let value = (ev.target.type === 'number') ? +ev.target.value : ev.target.value\r\n      value = (ev.target.type === 'checkbox') ? ev.target.checked : value\r\n      setFields(prevFields => ({ ...prevFields, [field]: value }))\r\n    },\r\n    setFields\r\n  ]\r\n}\r\n\r\nexport const useError = (initialState, cb = () => { }) => {\r\n  const [fields, setFields] = useState(initialState)\r\n\r\n  useEffect(() => {\r\n    cb(fields)\r\n  }, [fields,cb])\r\n\r\n  return [\r\n    fields,\r\n    function (ev) {\r\n      setFields(prevFields => ({ ...prevFields, [field]: '' }))\r\n      const field = ev.target.name\r\n      let value = (ev.target.type === 'number') ? +ev.target.value : ev.target.value\r\n      if (value > 5 || value < 0) {\r\n        setFields(prevFields => ({ ...prevFields, [field]: value }))\r\n      }\r\n    },\r\n    setFields\r\n  ]\r\n}\r\n\r\nexport const useHandleModal = (initialState, cb = () => { }) => {\r\n  const [fields, setFields] = useState(initialState)\r\n\r\n  useEffect(() => {\r\n    cb(fields)\r\n  }, [fields,cb])\r\n\r\n  return [\r\n    fields,\r\n    function (field, value) {\r\n      setFields(prevFields => ({ ...prevFields, [field]: value }))\r\n    },\r\n    setFields\r\n  ]\r\n}\r\n\r\n\r\nexport const useGeolocation = () => {\r\n\r\n  const [location, setLocation] = useState({\r\n    isReady: false,\r\n    coordinates: {\r\n      lng: '', lat: ''\r\n    }\r\n  })\r\n\r\n  useEffect(() => {\r\n    \r\n    navigator.geolocation.getCurrentPosition(onSucsess, onError)\r\n  }, [])\r\n\r\n  const onSucsess = (position) => {\r\n    setLocation({\r\n      isReady: true,\r\n      coordinates: {\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude\r\n      }\r\n    })\r\n  }\r\n\r\n  const onError = (err) => {\r\n    setLocation({\r\n      isReady: true,\r\n      err\r\n    })\r\n\r\n  };\r\n\r\n  return location\r\n}\r\n\r\nexport default function useWindowSize() {\r\n  const isClient = typeof window === 'object';\r\n\r\n  function getSize() {\r\n    return {\r\n      width: isClient ? window.innerWidth : undefined,\r\n      height: isClient ? window.innerHeight : undefined\r\n    };\r\n  }\r\n\r\n  const [windowSize, setWindowSize] = useState(getSize);\r\n\r\n  useEffect(() => {\r\n    if (!isClient) {\r\n      return false;\r\n    }\r\n\r\n    function handleResize() {\r\n      setWindowSize(getSize());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount and unmount\r\n\r\n  return windowSize;\r\n}","import React, { useEffect, useState } from \"react\"\nimport ReactToExcel from 'react-html-table-to-excel'\nimport { useSelector } from \"react-redux\"\nimport { useHistory } from \"react-router\"\nimport useWindowSize from \"../../services/customHooks\"\n// import { treeService } from \"../services/treeService\"\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd'\nexport const TreesTable = ({ onRemoveTree, trees }) => {\n\n    const [isMobile, setIsMobile] = useState(false)\n    const [draggableTrees, setDraggableTrees] = useState(trees)\n    const history = useHistory()\n    const { loggedInUser } = useSelector(state => state.appModule)\n\n\n    useEffect(() => {\n        setDraggableTrees(trees)\n    }, [trees])\n\n    const windowSize = useWindowSize()\n\n    useEffect(() => {\n        windowSize.width < 500 ? setIsMobile(true) : setIsMobile(false)\n    }, [windowSize])\n\n    const calculateValue = (tree) => {\n        const { canopy, location, health } = tree\n        const { typeValue } = tree.type\n        return (+canopy + +typeValue + +location + +health)\n    }\n\n    const calculateTreeValue = (tree) => {\n        const sum = (((tree.location * +tree.type.typeValue * tree.health) / 5) * (Math.pow((tree.diameter / 2), 2) * 3.14) / 5) * 20\n        return tree.quantity * sum.toFixed(2)\n    }\n\n    const calculatePalmTreeValue = (tree) => {\n        const sum = (tree.height * ((tree.location / 5 * +tree.type.typeValue / 5 * +tree.health / 5))) * 1500\n        return tree.quantity * sum.toFixed(2)\n    }\n\n    // const onRemoveTree = (tree) => {\n    //     treeService.removeTree(tree._id, loggedInUser.username)\n    // }\n\n    const ValueColor = (tree) => {\n        let sum = calculateValue(tree)\n        if (sum <= 6) return 'yellow'\n        else if (sum > 6 && 14 > sum) return 'grey'\n        else if (sum > 13 && 17 > sum) return 'green'\n        else return 'red'\n    }\n    const recommendationColor = (recommendation) => {\n        if (recommendation === 'כריתה') return 'yellow'\n        if (recommendation === 'שימור') return 'red'\n        if (recommendation === 'העתקה') return 'orange'\n        else return 'blue'\n    }\n\n    const handleOnDragEnd = (result) => {\n        if (!result.destination) return\n        const items = Array.from(draggableTrees)\n        const [reorderItem] = items.splice(result.source.index, 1)\n        items.splice(result.destination.index, 0, reorderItem)\n        setDraggableTrees(items)\n    }\n\n    return (\n        <section className=\"trees-table \">\n            <table id=\"main-table\">\n                <tr>\n                    <th>מספר\n                        העץ/פוליגון </th>\n                    <th>מין העץ/תאור\n                        הפוליגון</th>\n                    <th>כמות עצים</th>\n                    <th>**גובה\n                        העץ\n                        (מ')</th>\n                    <th>*קוטר\n                        גזע\n                        (ס\"מ)</th>\n                    <th>מצב\n                        בריאותי\n                        (0-5)</th>\n                    <th>מיקום\n                        העץ\n                        (0-5)</th>\n                    <th>ערך\n                        מין\n                        העץ\n                        (0-5)</th>\n                    <th>ניקוד\n                        חופת\n                        העץ\n                        (0-5)</th>\n                    <th>סך ערכיות\n                        העץ/פוליגון\n                        (0-20)</th>\n                    <th>***אזור\n                        שורשים\n                        מוגן\n                        רדיוס\n                        במ'</th>\n                    <th>שווי\n                        העצים ב\n                        ₪</th>\n                    <th>היתכנות העתקה </th>\n                    <th>הערות</th>\n                    <th>המלצות</th>\n                    <th>סיבת כריתה או העתקת העץ</th>\n                </tr>\n                <DragDropContext onDragEnd={handleOnDragEnd}>\n                    <Droppable droppableId=\"trees-desktop\">\n                        {(provided) => (\n                            <tbody {...provided.droppableProps} ref={provided.innerRef}>\n                                {draggableTrees.map((tree, idx) => {\n                                    return (\n                                        <Draggable\n                                            key={tree._id} draggableId={tree._id} index={idx}>\n                                            {(provided) => (\n                                                <tr\n                                                    style={{\n                                                        backgroundColor: 'red !important',\n                                                        position: 'absolute'\n                                                    }}\n\n                                                    {...provided.draggableProps}\n                                                    {...provided.dragHandleProps}\n                                                    ref={provided.innerRef}>\n                                                    {tree.idx &&\n                                                        <td>{tree.idx}\n                                                        </td>}\n                                                    <td>{tree.type.label}</td>\n                                                    <td>{tree.quantity}</td>\n                                                    <td>{tree.height}</td>\n                                                    <td>{tree.diameter}</td>\n                                                    <td>{tree.health}</td>\n                                                    <td>{tree.location}</td>\n                                                    <td>{tree.type.typeValue}</td>\n                                                    <td>{tree.canopy}</td>\n                                                    <td className={ValueColor(tree)}>{calculateValue(tree)}</td>\n                                                    <td>{tree.rootsDiameter}</td>\n                                                    {!tree.isPalmTree && <td>{calculateTreeValue(tree)}</td>}\n                                                    {tree.isPalmTree && <td>{calculatePalmTreeValue(tree)}</td>}\n                                                    <td>{tree.movingPossibility}</td>\n                                                    <td>{tree.description}</td>\n                                                    <td className={recommendationColor(tree.recommendation)}>{tree.recommendation}</td>\n                                                    <td>{tree.movingReason}</td>\n                                                    <td>\n\n                                                        <div\n                                                            onClick={() => { history.push(`tree_update/${tree._id}`) }}\n                                                            className=\"edit-btn btn\">עריכה</div >\n                                                        <div\n                                                            onClick={() => { onRemoveTree(tree) }}\n                                                            className=\"delete-btn btn\">מחיקה</div >\n                                                    </td>\n                                                </tr>\n                                            )}\n                                        </Draggable>\n                                    )\n                                })}\n                            </tbody>\n                        )}\n                    </Droppable>\n                </DragDropContext >\n                <ReactToExcel\n                    className=\"download-table \"\n                    table=\"main-table\"\n                    filename=\"טבלת סקר עצים\"\n                    sheet=\"טבלת סקר עצים\"\n                    buttonText=\"הורדה\"\n                />\n            </table>\n\n            <section className=\"mobile-table\">\n                {trees?.map((tree, idx) => {\n                    return (\n                        <div className=\"mobile-tree-card\" key={tree._id}>\n                            <div className=\"flex\">\n                                <p>אינדקס</p>\n                                <p>{tree.idx}</p>\n\n                            </div>\n                            <div className=\"flex\">\n                                <p>סוג עץ</p>\n                                <p>{tree.type.label}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p> כמות</p>\n                                <p>{tree.quantity}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>גובה</p>\n                                <p>{tree.height}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>קוטר</p>\n                                <p>{tree.diameter}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>מצב בריאותי</p>\n                                <p>{tree.health}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>מיקום</p>\n                                <p>{tree.location}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>ערך עץ</p>\n                                <p>{tree.type.typeValue}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>ניקוד חופת עץ</p>\n                                <p>{tree.canopy}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>ערך עץ</p>\n                                <p className={ValueColor(tree)}>{calculateValue(tree)}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>קוטר שורשרים</p>\n                                <p>{tree.rootsDiameter}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>שווי כספי</p>\n                                {!tree.isPalmTree && <p>{calculateTreeValue(tree)}</p>}\n                                {tree.isPalmTree && <p>{calculatePalmTreeValue(tree)}</p>}\n                            </div>\n                            <div className=\"flex\">\n                                <p>אפשרות העתקה</p>\n                                <p>{tree.movingPossibility}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>תיאור</p>\n                                <p aria-multiline=\"true\">{tree.description}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>המלצה</p>\n                                <p>{tree.recommendation}</p>\n                            </div>\n                            <div className=\"flex\">\n                                <p>סיבת העברה</p>\n                                <p>{tree.movingReason}</p>\n                            </div>\n                            <div\n                                onClick={() => { history.push(`tree_update/${tree._id}`) }}\n                                className=\"edit-btn btn\">עריכה</div >\n                            <div\n                                onClick={() => { onRemoveTree(tree) }}\n                                className=\"delete-btn btn\">מחיקה</div >\n                        </div>\n                    )\n                })\n\n                }\n                {isMobile && <ReactToExcel\n                    className=\"download-table \"\n                    table=\"main-table\"\n                    filename=\"טבלת סקר עצים\"\n                    sheet=\"טבלת סקר עצים\"\n                    buttonText=\"הורדה\"\n                />}\n            </section>\n        </section >\n    )\n\n\n}\n","import React, { useEffect, useState } from \"react\"\n\nexport function TreeRecommendationTable({ trees }) {\n\n  const [recommendationTable, setRecommendationTable] = useState({\n\n  })\n\n  useEffect(() => {\n    console.log('trees recomand', trees);\n    sumRecommendations()\n  }, [trees])\n\n  useEffect(() => {\n    console.log('recommendationTable', recommendationTable);\n  }, [recommendationTable])\n\n  const recLabelConvert = (rec) => {\n    switch (rec) {\n      case 'שימור':\n        return 'preserve'\n      case 'העתקה':\n        return 'relocation'\n      case 'כריתה':\n        return 'amputation'\n      default:\n        return 'אינו מוגדר עץ בוגר'\n    }\n  }\n\n  const sumRecommendations = () => {\n    const recArr = {\n      preserve: 0,\n      relocation: 0,\n      amputation: 0,\n      notDefined: 0,\n      total: 0\n    }\n    trees.forEach(tree => {\n      const rec = recLabelConvert(tree.recommendation)\n      recArr[rec]++\n      recArr.total++\n    })\n    setRecommendationTable(recArr)\n  }\n\n\n  const numToPercentage = (type) => {\n    const res = (((type / trees.length) * 100).toFixed(0))\n  return (res + '%')\n}\n\nreturn (\n  <section className='tree-recommendation-table trees-table flex cloumn'>\n   \n    <table>\n      <thead className=\"green\">\n        <tr className=\"green\" key=\"\">\n          <th >המלצה</th>\n          <th >מס׳ עצים</th>\n          <th >סה״כ</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td>סה״כ עצים לשימור</td>\n          <td>{recommendationTable.preserve}</td>\n          <td>{numToPercentage(recommendationTable.preserve)}</td>\n        </tr>\n        <tr>\n          <td>סה״כ עצים להעתקה</td>\n          <td>{recommendationTable.relocation}</td>\n          <td>{numToPercentage(recommendationTable.relocation)}</td>\n        </tr>\n        <tr>\n          <td>סה״כ עצים לכריתה</td>\n          <td>{recommendationTable.amputation}</td>\n          <td>{numToPercentage(recommendationTable.amputation)}</td>\n        </tr>\n        <tr>\n          <td>סה\"כ עצים בוגרים בשטח</td>\n          <td>{recommendationTable.total}</td>\n          <td>{numToPercentage(recommendationTable.total)}</td>\n        </tr>\n      </tbody>\n    </table>\n  </section>\n)\n}","\nimport React, { useEffect, useState } from 'react'\nimport { TreesImages } from '../cmps/TreesImages';\nimport { treeService } from '../services/treeService';\nimport { useSelector } from 'react-redux';\nimport { storageService } from '../services/storageService';\nimport { TreesTypesTable } from '../cmps/table/TreesTypesTable';\nimport { TreesTable } from '../cmps/table/TreesTable';\nimport { TreeRecommendationTable } from '../cmps/table/TreeRecommendationTable';\n// const TreesTypesTable = lazy(() => import('../cmps/TreesTypesTable'))\n\nexport const FinalSurvey = () => {\n\n    const { currentSurvey } = useSelector(state => state.TreeModule)\n    const { loggedInUser } = useSelector(state => state.appModule)\n    let [trees, setTrees] = useState([])\n    let [tableIdList, setTableIdList] = useState([''])\n    const [localSurveyId, setLocalSurveyId] = useState('')\n\n    useEffect(() => {\n        queryTrees()\n    }, [])\n\n\n    useEffect(() => {\n        async function queryTrees() {\n            if (currentSurvey) {\n                setTrees(await treeService.queryTrees(localSurveyId?.surveyTitle))\n            }\n        }\n        queryTrees()\n    }, [localSurveyId])\n\n    useEffect(() => {\n\n    }, [currentSurvey, loggedInUser])\n\n    async function queryTrees() {\n        setTableIdList(await treeService.querySurveyIdList(loggedInUser))\n        setTrees(await treeService.queryTrees(currentSurvey?.surveyTitle, loggedInUser?.username))\n        if (!currentSurvey) {\n            let storageId = await storageService.loadFromStorage('surveyId')\n            let loggedinUser = await storageService.loadFromStorage('loggedinUser')\n            if (storageId) {\n                setTrees(await treeService.queryTrees(storageId.surveyTitle, loggedinUser.username))\n                setLocalSurveyId(storageId)\n            }\n        }\n    }\n    const onRemoveTree = (tree) => {\n        treeService.removeTree(tree._id, loggedInUser.username)\n        queryTrees()\n    }\n\n    return (\n        <section id=\"main-survey\" className=\"main-container  \">\n            <div className=\"final-survey\">\n                <h1>טבלה סקר <span>{currentSurvey?.surveyTitle || localSurveyId?.surveyTitle}</span></h1>\n                <TreesTable onRemoveTree={onRemoveTree} trees={trees} />\n                <h1>תמונות</h1>\n                <TreesImages trees={trees} />\n                {/* <Suspense fallback={<h1>Loading</h1>} > */}\n                <h1>טבלת ריכוז עפ\"י מיני העצים </h1>\n                <TreesTypesTable trees={trees} />\n                {/* </Suspense> */}\n                <h1>טבלת סיכום המלצות</h1>\n                <TreeRecommendationTable trees={trees} />\n                {/* {treeService.finalSurveyNote() } */}\n                {/* <TreeMap text=\"mapmap\" /> */}\n            </div>\n        </section>\n    )\n}","\r\n// Dispatchers\r\nconst _setFilter = (filterBy) => ({ type: 'SET_FILTER', filterBy });\r\nconst _toggleDark = () => ({ type: 'TOGGLE_DARK' });\r\nconst _toggleIsTreePreviewShowen = () => ({ type: 'TOGGLE_IS_PREVIEW_TREE' });\r\nconst _setCurrentSurvey = (survey) => ({ type: 'SET_CURRENT_SURVEY', survey });\r\n\r\n// THUNK\r\n\r\nexport function setFilter(filterBy) {\r\n    return async (dispatch) => dispatch(_setFilter(filterBy))\r\n}\r\nexport function setCurrentSurvey(survey) {\r\n    return async (dispatch) => dispatch(_setCurrentSurvey(survey))\r\n}\r\nexport function toggleDark() {\r\n    return (dispatch) => dispatch(_toggleDark())\r\n}\r\nexport function toggleIsTreePreviewShowen() {\r\n    return (dispatch) => dispatch(_toggleIsTreePreviewShowen())\r\n}\r\n\r\n// export function saveCar(car) {\r\n//     return async (dispatch, getState) => {\r\n//         const type = car._id ? 'UPDATE_CAR' : 'ADD_CAR';\r\n//         const savedCar = await carService.save(car)\r\n//         dispatch({ type, car: savedCar })\r\n//     }\r\n// }\r\n","import React, { useCallback } from 'react'\nimport { useFormCreateSurvey } from '../services/customHooks'\nimport { Link, useHistory } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setCurrentSurvey } from '../actions/TreeActions'\nimport { storageService } from '../services/storageService';\n\n\nexport function CreateSurvey () {\n\n\n    const history = useHistory();\n    const handleOnClick = useCallback(() => history.push('/survey_editor'), [history]);\n    const dispatch = useDispatch()\n    const { currentSurvey } = useSelector(state => state.TreeModule)\n\n    const [survey, handleChange] = useFormCreateSurvey({\n        surveyTitle: '',\n        surveyDate: '',\n        surveySummary: ''\n    })\n\n    const addNewSurvey = async () => {\n        await dispatch(setCurrentSurvey(survey))\n        storageService.saveToStorage('surveyId', survey)\n        handleOnClick()\n    }\n\n    return (\n        <section className=\"new-survey rtl\">\n\n            <form action=\"\">\n                <label htmlFor=\"surveyTitle\" onSubmit={(ev) => { ev.preventDefault() }}>\n                    כותרת סקר:\n                    <input\n                        id=\"surveyTitle\"\n                        name=\"surveyTitle\"\n                        type=\"text\"\n                        onChange={(ev) => { handleChange(ev) }}\n                        value={survey.surveyTitle} />\n                </label>\n                <label htmlFor=\"surveyTitle\">\n                    תאריך סקר:\n                    <input\n                        id=\"surveyDate\"\n                        name=\"surveyDate\"\n                        type=\"date\"\n                        placeholder=\"dd-mm-yyyy\"\n                        min=\"1997-01-01\"\n                        max=\"2030-12-31\"\n                        onChange={(ev) => { handleChange(ev) }}\n                        value={survey.surveyDate} />\n                </label>\n                <div className=\"add-btn button\" onClick={() => { addNewSurvey() }}>הוסף סקר</div>\n\n                <Link to=\"/choose_survey\" >\n                    <div className=\"existing-survey\">חזרה</div>\n                </Link>\n\n            </form>\n        </section>\n\n    )\n}","import { useHistory } from 'react-router-dom'\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { treeService } from '../services/treeService';\nimport { MenuItem, Select, FormControl, InputLabel } from '@material-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setCurrentSurvey } from '../actions/TreeActions';\nimport { storageService } from '../services/storageService';\nimport { CreateSurvey } from '../pages/CreateSurvey';\n\n\n\nexport const ChooseSurvey = () => {\n\n    let dispatch = useDispatch()\n    const history = useHistory();\n    let [surveyIdList, setSurveyIdList] = useState([])\n    let [currentSurveyId, setCurrentSurveyId] = useState({})\n    const handleOnClickNext = useCallback(() => history.push('/survey_editor'), [history]);\n    const handleOnClickBack = useCallback(() => history.push('/'), [history]);\n    const handleOnClickCreate = useCallback(() => history.push('/create_survey'), [history]);\n    const { currentSurvey } = useSelector(state => state.TreeModule)\n    const { loggedInUser, loginErr } = useSelector(state => state.appModule)\n\n\n    useEffect(() => {\n        (async () => {\n            if (loggedInUser) {\n                const resp = await treeService.querySurveyIdList(loggedInUser)\n                setSurveyIdList(resp)\n            }\n        })()\n    }, [])\n\n    useEffect(() => {\n        let filterdList = surveyIdList.filter(tree => { return tree.surveyTitle === currentSurveyId })\n        if (filterdList.length) {\n            storageService.saveToStorage('surveyId', filterdList[0])\n            dispatch(setCurrentSurvey(filterdList[0]))\n        }\n    }, [currentSurveyId])\n\n\n\n\n    return (\n        <section className=\"choose-section flex\">\n            {(surveyIdList.length !== 0) && <>\n                <h1>בחר סקר</h1>\n                <FormControl>\n                    <InputLabel required id=\"movingPossibility\">בחר</InputLabel>\n                    <Select\n                        required\n                        type=\"text\"\n                        id=\"currentTableId\"\n                        name=\"currentTableId\"\n                        variant=\"filled\"\n                        color=\"primary\"\n                        value={currentSurveyId}\n                        label=\"לחץ כאן\"\n                        placeholder=\"לחץ כאן\"\n                        onChange={(ev) => { setCurrentSurveyId(ev.target.value) }} >\n                        {\n                            surveyIdList?.map((id) => (\n                                <MenuItem\n                                    key={id.surveyTitle}\n                                    value={id.surveyTitle}>\n                                    {id.surveyTitle}\n                                </MenuItem>\n                            ))\n                        }\n                    </Select>\n                </FormControl>\n                <div className=\"next-btn button\"\n                    onClick={() => { handleOnClickNext() }} >\n                    <p>המשך</p>\n                </div>\n                <div className=\"back-btn button\"\n                    onClick={() => { handleOnClickBack() }} >\n                    <p>חזור</p>\n                </div>\n            </>}\n            {(surveyIdList.length === 0)&&<> \n                <h1>הוסף סקר ראשון</h1>\n                <div className=\"next-btn button\"\n                    onClick={() => { handleOnClickCreate() }} >\n                        <p>הוסף סקר</p>\n                </div>\n                <CreateSurvey />\n            </>}\n        </section>\n    )\n}","import treeTypes from '../data/treeTypes.json';\nimport palmstreeTypes from '../data/palmstreeTypes.json';\n\n//  const treeTypes = [\n//     {\n//         typeValue: \"3\",\n//         BinomialNomenclature: \" Persea americana\",\n//         label: \"אבוקדו אמריקני (זנים שונים)\"\n//     },\n//     {\n//         typeValue: \"3\",\n//         BinomialNomenclature: \"Juglans regia \",\n//         label: \"אגוז המלך \"\n//     }\n// ]\n\n\nconst movingPossibilityOptions = [\n    {\n        value: 'hign',\n        label: 'גבוהה',\n    },\n    {\n        value: 'medium',\n        label: 'בינונית',\n    },\n    {\n        value: 'low',\n        label: 'נמוכה',\n\n    }\n    ,\n    {\n        value: 'notPossible',\n        label: 'לא ניתן',\n\n    }\n];\nconst recommendationOptions = [\n    {\n        value: 'preserve',\n        label: 'שימור',\n    },\n    {\n        value: 'relocation',\n        label: 'העתקה',\n    },\n    {\n        value: 'amputation',\n        label: 'כריתה',\n    },\n    {\n        value: 'notDefined',\n        label: 'אינו מוגדר עץ בוגר',\n    }\n\n];\n\nexport const formService = {\n    movingPossibility: movingPossibilityOptions,\n    treeTypes,\n    palmstreeTypes,\n    recomandationOptions: recommendationOptions\n}\n","import React, { useEffect, useState, useImperativeHandle, forwardRef } from 'react'\n\nexport const FormAutocomplete = forwardRef(({ tree, onSetTreeType, options }, ref) => {\n    useImperativeHandle(\n        ref, () => ({\n            onResetAutocomplete() {\n                setTreeObj({})\n                setSearch('')\n            }\n        })\n    )\n    const [display, setDisplay] = useState(false)\n    const [search, setSearch] = useState('')\n    const [treeObj, setTreeObj] = useState({})\n    useEffect(() => {\n        if (tree) {\n            setTreeObj(tree)\n            setSearch(tree.label)\n            onSetTreeType(tree)\n        }\n    }, [tree])\n\n    useEffect(() => {\n        setDisplay(false)\n        onSetTreeType(treeObj)\n    }, [treeObj, onSetTreeType])\n\n\n\n    const setTree = (treeset) => {\n        setTreeObj(treeset)\n        setSearch(treeset.label)\n    }\n\n    return (\n        <section className=\"autocomplete-form\">\n            <input\n                onChange={(ev) => { setSearch(ev.target.value) }}\n                className=\"autocomplete-input\"\n                name=\"type\"\n                // value={tree ? tree.type : search}\n                value={search}\n                type=\"text\"\n                placeholder=\" מין העץ\"\n                autoComplete=\"off\"\n                onClick={() => { setDisplay(!display) }} />\n            {display &&\n                <div className=\"autocomplete-container\">\n                    {options.filter((option) => option?.label?.includes(search)).map((v, i) => {\n                        return (\n                            <div onClick={() => { setTree(v) }} className=\"tree-option\" key={v.label}>\n                                <span>{v.label}</span>\n                            </div>\n                        )\n                    })\n                    }\n                </div>\n            }\n        </section>\n    )\n})","import React from 'react'\nimport { TextField } from '@material-ui/core';\n\nexport default function Input(props) {\n\n    const { name, value, error = null, onChange, InputProps, id, multiline, rows, placeholder, type } = props;\n    return (\n        <TextField\n            autoComplete=\"off\"\n            variant=\"standard\"\n            name={name}\n            // value={value}\n            onChange={onChange}\n            InputProps={InputProps}\n            id={id}\n            color=\"primary\"\n            {...(type && { type: \"text\" })}\n            {...(!type && { type: \"number\" })}\n            {...(error && { error: true, helperText: error })}\n            {...multiline &&\n            {\n                rows: rows,\n                multiline\n            }}\n            // {...placeholder && { placeholder: placeholder }}\n            placeholder={placeholder}\n        />\n    )\n}","import React from 'react'\n\nexport default function FormModal({ HandleiIsModalShown, modal, imgSrc }) {\n    return (\n        <div\n            onClick={() => HandleiIsModalShown(modal.type, !modal.isShowen)}\n            className=\"form-modal health-modal\" >\n            <div className=\"modal-container \">\n                <img src={imgSrc} alt=\"מקרא\" />\n            </div>\n        </div>\n    )\n}","function uploadImg(files) {\n    const CLOUD_NAME = 'dhorz8v6v'\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\n    const formData = new FormData();\n    // formData.append('file', files[0])\n    formData.append('file', files)\n    formData.append('upload_preset', 'e4caygdi');\n\n    return fetch(UPLOAD_URL, {\n        method: 'POST',\n        body: formData\n    })\n        .then(res => res.json())\n        .then(res => {\n            return res\n        })\n        .catch(err => console.error(err))\n}\n\nexport const cloudinaryService = {\n    uploadImg\n}","// REACT IMAGE UPLOAD WRAPPER\nimport React, { useEffect, useState } from \"react\";\nimport ImageUploading from \"react-images-uploading\";\nimport { cloudinaryService } from \"../services/cloudinaryService\";\n\nexport const ImgUpload = ({ onGetImgUrl }) => {\n\n    const [isUpload, setIsUpload] = useState(null);\n    const [images, setImages] = useState([]);\n    const maxNumber = 1;\n\n    useEffect(() => {\n        (async () => {\n            if (images.length !== 0) {\n                setIsUpload(true)\n                const imgUrl = await cloudinaryService.uploadImg(images[0].file)\n                onGetImgUrl(imgUrl.secure_url)\n                setIsUpload(false)\n            }\n        })()\n    }, [images])\n\nuseEffect(()=>{\nconsole.log(images);\n},[images])\n\n    const onChange = (imageList, addUpdateIndex) => {\n        setImages(imageList);\n    };\n\n\n    return (\n        <ImageUploading\n            // multiple\n            value={images}\n            onChange={onChange}\n            maxNumber={maxNumber}\n            dataURLKey=\"data_url\"\n            onClick={(ev) => { ev.stopPropagation() }}\n        >\n            {({\n                imageList,\n                onImageUpload,\n                onImageRemoveAll,\n                onImageUpdate,\n                onImageRemove,\n                isDragging,\n                dragProps\n            }) => (\n                <div\n                    onClick={(ev) => {\n                        ev.stopPropagation()\n                        ev.preventDefault()\n                    }}\n                    className=\"upload__image-wrapper \">\n                    <button\n                        className=\"upload-btn btn\"\n                        style={isDragging ? { color: \"red\" } : null}\n                        onClick={(ev) => {\n                            ev.preventDefault()\n                            ev.stopPropagation()\n                            onImageUpload()\n                        }}\n                        {...dragProps}\n                    >\n                        הוסף תמונה\n                    </button>\n                    &nbsp;\n                    {/* <button\n                        className=\"btn\"\n                        onClick={onImageRemoveAll}>Remove all images</button> */}\n                    {!isUpload&& imageList.map((image, index) => (\n                        <div key={index} className=\"image-item\">\n                            <img src={image.data_url} alt=\"\" width=\"100\" />\n                            {/* <div className=\"image-item__btn-wrapper\">\n                                <button onClick={() => onImageUpdate(index)}>Update</button>\n                                <button onClick={() => onImageRemove(index)}>Remove</button>\n                            </div> */}\n                        </div>\n                    ))}\n                </div>\n            )}\n        </ImageUploading>)\n}","import React, { useEffect, useState } from 'react'\nimport { useForm, useHandleModal } from '../services/customHooks'\nimport { Button, MenuItem, Select, FormControl } from '@material-ui/core';\nimport { formService } from '../services/formService';\nimport { treeService } from '../services/treeService';\nimport { useSelector } from 'react-redux';\nimport { FormAutocomplete } from './FormAutocomplete';\nimport Input from './form/input';\nimport { storageService } from '../services/storageService';\nimport FormModal from './form/FormModal';\nimport { ImgUpload } from './ImgUpload';\nimport { useRef } from 'react';\n\nexport const TreesForm = ({ querySurveyTrees }) => {\n\n    const { currentSurvey } = useSelector(state => state.TreeModule)\n    const { loggedInUser } = useSelector(state => state.appModule)\n\n    const [surveyId, setSurveyId] = useState('')\n    const [isImgReady, setIsImgReady] = useState(false)\n    const [treeTypeOptions, setTreeTypeOptions] = useState([])\n    const [treeType, setType] = useState(null)\n    const [imgUrl, setImgUrl] = useState('')\n    const childRef = useRef();\n\n\n    const initialFValues = {\n        quantity: '',\n        type: '',\n        height: '',\n        diameter: '',\n        health: '',\n        location: '',\n        canopy: '',\n        description: '',\n        movingPossibility: '',\n        movingReason: '',\n        idx: '',\n        rootsDiameter: '',\n        recommendation: '',\n        isPalmTree: false\n    }\n\n    const validate = (fieldValues = values) => {\n        let temp = { ...errors }\n        if ('health' in fieldValues)\n            temp.health = isLessThenFiveInput(fieldValues.health) || isEmptyInput(fieldValues.health)\n        if ('canopy' in fieldValues)\n            temp.canopy = isLessThenFiveInput(fieldValues.canopy) || isEmptyInput(fieldValues.canopy)\n        if ('location' in fieldValues)\n            temp.location = isLessThenFiveInput(fieldValues.location) || isEmptyInput(fieldValues.location)\n        if ('mobile' in fieldValues)\n            temp.mobile = isLessThenFiveInput(fieldValues.mobile) || isEmptyInput(fieldValues.mobile)\n        if ('quantity' in fieldValues)\n            temp.quantity = isEmptyInput(fieldValues.quantity)\n        if ('idx' in fieldValues)\n            temp.idx = isEmptyInput(fieldValues.idx)\n\n        if ('diameter' in fieldValues)\n            temp.diameter = isEmptyInput(fieldValues.diameter)\n        if ('height' in fieldValues)\n            temp.height = isEmptyInput(fieldValues.height)\n        if ('rootsDiameter' in fieldValues)\n            temp.rootsDiameter = isEmptyInput(fieldValues.rootsDiameter)\n        if ('movingPossibility' in fieldValues)\n            temp.movingPossibility = isEmptyInput(fieldValues.movingPossibility)\n        // if ('description' in fieldValues)\n        //     temp.description = isEmptyInput(fieldValues.description)\n        // if ('movingReason' in fieldValues)\n        //     temp.movingReason = isEmptyInput(fieldValues.movingReason)\n        if ('recommendation' in fieldValues)\n            temp.recommendation = isEmptyInput(fieldValues.recommendation)\n\n        setErrors({\n            ...temp\n        })\n\n        if (fieldValues === values)\n            return Object.values(temp).every(x => x === \"\")\n    }\n\n    const isLessThenFiveInput = (field) => {\n        return (field <= 5 && field >= 0) ? \"\" : \"קלט צריך להיות בין 0 ל 5\"\n    }\n    const isEmptyInput = (field) => {\n        const length = (field + '').length\n        return (length > 0) ? \"\" : \"הכנס ערך\"\n    }\n    // const isTreeIdxValid = (fiel d) => {\n    //     const regex = new RegExp ([1-1000]+[A-Z])\n    //     const isMatch='aaa'.search(regex)\n    //     const length = (field + '').length\n    //     return (length > 0) ? \"\" : \"הכנס ערך\"\n    // }\n\n\n    const {\n        values,\n        // setValues,\n        errors,\n        setErrors,\n        handleInputChange,\n        resetForm\n    } = useForm(initialFValues, true, validate);\n\n    const [isModalShown, HandleIsModalShown] = useHandleModal({\n        health: '',\n        location: '',\n        canopy: '',\n        isAddingTree: ''\n    })\n\n    useEffect(() => {\n        setTreeTypeOptions(formService.treeTypes)\n        setSurveyId(currentSurvey?.surveyTitle)\n    }, [])\n\n    useEffect(() => {\n        if (!surveyId || Object.keys(surveyId).length === 0) {\n            let storageId = storageService.loadFromStorage('surveyId')\n            if (storageId) {\n                setSurveyId(storageId)\n            }\n        }\n    }, [surveyId])\n\n    const onResetForm = () => {\n        resetForm()\n        childRef.current.onResetAutocomplete()\n        const inputsRef = document.querySelectorAll('input')\n        const textareaRef = document.querySelectorAll('textarea')\n        inputsRef.forEach(input => {\n            input.value = ''\n        })\n        textareaRef.forEach(textarea => {\n            textarea.value = ''\n        })\n    }\n\n    const onGetImgUrl = (img) => {\n        // setIsImgReady(true)\n        setImgUrl(img)\n    }\n\n    const onSetTreeType = (treeTypeObj) => {\n        setType(treeTypeObj);\n    }\n\n    const setIsPalmTree = (ev) => {\n        handleInputChange(ev)\n            (ev.target.checked) ? setTreeTypeOptions(formService.palmstreeTypes) : setTreeTypeOptions(formService.treeTypes)\n    }\n\n    const submitForm = (ev) => {\n        ev.preventDefault()\n        if (!treeType) return alert('בחר מין עץ')\n        const treeCopy = { ...values }\n        treeCopy.type = treeType\n        treeCopy.surveyId = surveyId\n        treeCopy.imgUrl = imgUrl\n        if (validate()) {\n            treeService.save(treeCopy, loggedInUser)\n            HandleIsModalShown(!isModalShown.isAddingTree)\n            querySurveyTrees()\n            onResetForm()\n        }\n        setImgUrl('')\n        window.scrollTo(0, 0)\n    }\n    return (\n        <div className=\"form-container\">\n            <form dir=\"rtl\" action=\"#\" onSubmit={(ev) => submitForm(ev)}>\n                <div className=\"trees-form flex column\">\n                    <div className=\"type-form \">\n                        <label htmlFor=\"isPalmTree rtl\">\n                            <input type=\"checkbox\" name=\"isPalmTree\" id=\"isPalmTree\" onChange={(ev) => { setIsPalmTree(ev) }} />\n                            עץ דקל\n                        </label>\n                        <FormAutocomplete ref={childRef} options={treeTypeOptions} onSetTreeType={onSetTreeType} />\n                    </div>\n                    <div className=\"input-container\">\n                        <p>מספר עץ</p>\n                        <Input\n                            error={errors.idx}\n                            name=\"idx\"\n                            value={values.idx}\n                            onChange={handleInputChange} />\n                    </div>\n                    <div className=\"input-container\">\n                        <p>כמות עצים</p>\n                        <Input\n                            error={errors.quantity}\n                            value={values.quantity}\n                            name=\"quantity\"\n                            onChange={handleInputChange} />\n                    </div>\n                    <div className=\"input-container\">\n                        <p>קוטר הגזע</p>\n                        <Input\n                            error={errors.diameter}\n                            value={values.diameter}\n                            placeholder=\"קוטר בס״מ של הגזע\"\n                            name=\"diameter\"\n                            variant=\"standard\"\n                            onChange={handleInputChange} />\n                    </div>\n\n                    <div className=\"input-container\">\n                        <p onClick={() => HandleIsModalShown('health', !isModalShown.health)} >*מצב בריאותי</p>\n                        <Input\n                            error={errors.health}\n                            value={values.health}\n                            InputProps={{\n                                inputProps: {\n                                    max: 5,\n                                    min: 0\n                                }\n                            }}\n                            placeholder=\"0-5\"\n                            id=\"health\"\n                            name=\"health\"\n                            variant=\"standard\"\n                            onChange={handleInputChange} />\n                        {isModalShown.health &&\n                            <FormModal\n                                HandleiIsModalShown={HandleIsModalShown}\n                                modal={{\n                                    type: 'health',\n                                    isShowen: isModalShown.health\n                                }}\n                                imgSrc=\"/imgs/modal/healthModal.png\" />}\n                    </div>\n                    <div className=\"input-container\">\n                        <p>גובה העץ</p>\n                        <Input\n                            error={errors.height}\n                            name=\"height\"\n                            variant=\"standard\"\n                            placeholder=\"גובה העץ במטרים\"\n                            onChange={handleInputChange} />\n                    </div>\n                    <div className=\"input-container\">\n                        <p onClick={() => HandleIsModalShown('location', !isModalShown.location)} > *מיקום העץ</p>\n\n                        <Input\n                            error={errors.location}\n                            placeholder=\"0-5\"\n                            InputProps={{\n                                inputProps: {\n                                    max: 5,\n                                    min: 0\n                                }\n                            }}\n                            id=\"location\"\n                            name=\"location\"\n                            onChange={handleInputChange} />\n\n                        {isModalShown.location &&\n                            <FormModal\n                                HandleiIsModalShown={HandleIsModalShown}\n                                modal={{\n                                    type: 'location',\n                                    isShowen: isModalShown.location\n                                }}\n                                imgSrc=\"/imgs/modal/locationModal.png\" />}\n                    </div>\n                    <div className=\"input-container\">\n                        <p onClick={() => HandleIsModalShown('canopy', !isModalShown.canopy)} >*ניקוד חופת העץ</p>\n                        <Input\n                            error={errors.canopy}\n                            placeholder=\"0-5\"\n                            InputProps={{\n                                inputProps: {\n                                    max: 5,\n                                    min: 0\n                                }\n                            }}\n                            id=\"canopy\"\n                            name=\"canopy\"\n                            onChange={handleInputChange} />\n                        {isModalShown.canopy &&\n                            <FormModal\n                                HandleiIsModalShown={HandleIsModalShown}\n                                modal={{\n                                    type: 'canopy',\n                                    isShowen: isModalShown.canopy\n                                }}\n                                imgSrc=\"/imgs/modal/canopyModal.png\" />}\n                    </div>\n                    <div className=\"input-container\">\n                        <p>אזור שורשים מוגן</p>\n                        <Input\n                            error={errors.rootsDiameter}\n                            placeholder=\"אזור שורשים מוגן במטרים\"\n                            id=\"rootsDiameter\"\n                            name=\"rootsDiameter\"\n                            onChange={handleInputChange} />\n                    </div>\n                    <div className=\"input-container\">\n                        <p>היתכנות העתקה</p>\n                        <FormControl>\n                            <Select\n                                // error={errors.movingPossibility}\n                                type=\"text\"\n                                id=\"movingPossibility\"\n                                name=\"movingPossibility\"\n                                value={values.movingPossibility}\n                                onChange={handleInputChange}>\n                                {formService.movingPossibility.map((option) => (\n                                    <MenuItem\n                                        key={option.label}\n                                        value={option.label}>\n                                        {option.label}\n                                    </MenuItem>\n                                ))}\n                            </Select>\n                        </FormControl>\n                    </div>\n                    <div className=\"input-container\">\n                        <p>המלצה</p>\n                        <FormControl >\n                            <Select\n                                // error={errors.recommendation}\n                                type=\"text\"\n                                id=\"recommendation\"\n                                name=\"recommendation\"\n                                value={values.recommendation}\n                                onChange={handleInputChange}>\n                                {formService.recomandationOptions.map((option) => (\n                                    <MenuItem\n                                        key={option.label}\n                                        value={option.label}>\n                                        {option.label}\n                                    </MenuItem>\n                                ))}\n                            </Select>\n                        </FormControl>\n                    </div>\n                    <div className=\"input-container\">\n                        <p>סיבת כריתה או\n                            העתקת\n                            העץ</p>\n                        <Input\n                            // error={errors.movingReason}\n                            multiline\n                            rows={2}\n                            type=\"text\"\n                            id=\"movingReason\"\n                            name=\"movingReason\"\n                            onChange={handleInputChange} />\n                    </div>\n                    <div className=\"input-container\">\n                        <p>הערות</p>\n                        <Input\n                            // error={errors.description}\n                            multiline\n                            rows={2}\n                            type=\"text\"\n                            id=\"description\"\n                            name=\"description\"\n                            onChange={handleInputChange} />\n                    </div>\n                </div>\n                <ImgUpload onGetImgUrl={onGetImgUrl} />\n                <Button onClick={(ev) => submitForm(ev)} color=\"primary\" variant=\"outlined\">הוסף עץ </Button>\n\n                {isModalShown.isAddingTree &&\n                    <div\n                        onClick={() => { HandleIsModalShown(!isModalShown.health) }}\n                        className=\"adding-modal\">\n                        <div className=\"background\"></div>\n                        <h1>העץ נוסף בהצלחה!</h1>\n                    </div>}\n            </form>\n        </div>\n    )\n}\n","import React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router'\nimport { toggleIsTreePreviewShowen } from '../actions/TreeActions'\nimport { treeService } from '../services/treeService'\n\nexport const TreePreview = ({ tree, querySurveyTrees }) => {\n\n    const dispatch = useDispatch()\n    const [isRemove, setIsRemove] = useState(false)\n    const history = useHistory()\n    const { loggedInUser } = useSelector(state => state.appModule)\n\n\n\n    useEffect(() => {\n    })\n\n    const onRemoveTree = () => {\n        treeService.removeTree(tree._id, loggedInUser.username)\n        dispatch(toggleIsTreePreviewShowen())\n        querySurveyTrees()\n    }\n\n    return (\n        <section\n            onClick={e => {\n                e.stopPropagation()\n                e.preventDefault()\n                dispatch(toggleIsTreePreviewShowen())\n\n            }}\n            className=\"preview-container\" >\n\n            <section className=\"main-container tree-preview\">\n                <div className=\"preview-info\">\n                    <p>מספר עץ: {tree?.idx}</p>\n                    <p> סוג עץ: {tree?.type.typeValue}</p>\n                    <p>קוטר גזע: {tree?.diameter}</p>\n                    <p>מצב בריאותי: {tree?.health}</p>\n                    <p>גובה העץ: {tree?.height}</p>\n                    <p>מיקום העץ: {tree?.location}</p>\n                    <p>ניקוד חופת העץ: {tree?.canopy}</p>\n                    <p>היתכנות העתקה: {tree?.movingPossibility}</p>\n                    <p>המלצה: {tree?.recommendation}</p>\n                </div>\n                {tree.imgUrl !== '' && <img src={tree?.imgUrl} alt=\"tree\" />}\n                {tree.imgUrl === '' && <img src='imgs/tree_silhouette.png' alt=\"tree\" />}\n                <div className=\"options\">\n                    <div\n                        className=\"remove-btn btn\"\n                        onClick={() => { setIsRemove(true) }}>\n                        <span>מחק</span>\n                    </div>\n                    <div\n                        className=\"update-btn btn\"\n                        onClick={() => {\n                            history.push(`/tree_update/${tree._id}`)\n                        }}>\n                        <span>עדכן</span>\n                    </div>\n\n                </div>\n                {isRemove && <div className=\"remove-modal \">\n                    <p>האם למחוק ?</p>\n                    <div className=\"\">\n                        <p className=\"btn\" onClick={() => { onRemoveTree() }}>מחק</p>\n                        <p className=\"btn\" onClick={() => { setIsRemove(false) }}>חזור</p>\n                    </div>\n                </div>}\n                <div\n                    className=\"close-preview\"\n                    onClick={(ev) => {\n                        ev.stopPropagation()\n                        dispatch(toggleIsTreePreviewShowen())\n                    }}\n                ><span>X</span></div>\n            </section>\n        </section>\n    )\n}","import React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { TreesForm } from '../cmps/TreesForm'\nimport { treeService } from '../services/treeService'\nimport { storageService } from '../services/storageService';\nimport { TreePreview } from '../cmps/TreePreview';\nimport { toggleIsTreePreviewShowen } from '../actions/TreeActions';\n\nexport const SurveyEditor = () => {\n    \n    const dispatch = useDispatch()\n    const { currentSurvey, isTreePreviewShowen } = useSelector(state => state.TreeModule)\n    const { loggedInUser } = useSelector(state => state.appModule)\n    const [isAddingTree, setIsAddingTree] = useState(true)\n    const [currentSurveyTrees, setCurrentSurveyTrees] = useState([])\n    const [currentPreviewTree, setCurrentPreviewTree] = useState(false)\n    const [localCurrentSurvey, setLocalCurrentSurvey] = useState(null)\n\n\n    useEffect(() => { // querySurveyTreessss\n        querySurveyTrees()\n    }, [])\n\n\n\n    const querySurveyTrees = async () => {\n        let trees = await treeService.querySurveyTrees(currentSurvey?.surveyTitle,loggedInUser?.username)\n        setCurrentSurveyTrees(trees)\n        setLocalCurrentSurvey(currentSurvey)\n        if (!currentSurvey) {\n            const storageTreeId = storageService.loadFromStorage('surveyId')\n            if (storageTreeId) {\n                let trees = await treeService.querySurveyTrees(storageTreeId.surveyTitle,loggedInUser?.username)\n                setLocalCurrentSurvey(storageTreeId)\n                setCurrentSurveyTrees(trees)\n            }\n        }\n    }\n    // const querySurveyTrees = async () => {\n    //     let trees = await treeService.querySurveyTrees(currentSurvey?.surveyTitle,loggedInUser?.username)\n    //     setCurrentSurveyTrees(trees)\n    //     if (Object.keys(currentSurvey).length === 0) {\n    //         const storageTreeId = storageService.loadFromStorage('surveyId')\n    //         if (storageTreeId) {\n    //             let trees = await treeService.querySurveyTrees(storageTreeId.surveyTitle,loggedInUser?.username)\n    //             setLocalCurrentSurvey(storageTreeId)\n    //             setCurrentSurveyTrees(trees)\n    //         }\n    //     }\n    // }\n\n    return (\n        <section id=\"swup\" className=\"main-container rtl\">\n            <h1>טופס סקר עצים <span>{localCurrentSurvey?.surveyTitle}</span>  </h1>\n            <div className=\"add-tree\">\n                {<p onClick={(ev) => {\n                    ev.preventDefault()\n                    setIsAddingTree(true)\n                }}>הוסף עץ</p> && !isAddingTree}\n                {isAddingTree && <TreesForm querySurveyTrees={querySurveyTrees} />}\n            </div>\n            <div className=\"other-trees\">\n                <h3>עצים נוספים</h3>\n                {currentSurveyTrees && <div className=\"current-trees pointer flex\">\n                    {currentSurveyTrees.map((tree) => {\n                        return <div\n                            key={tree._id}\n                            className=\"tree-index\"\n                            onClick={() => {\n                                setCurrentPreviewTree(tree)\n                                dispatch(toggleIsTreePreviewShowen())\n                            }} >\n                            <p>{tree.idx}</p>\n                            <img src=\"imgs/treeLogo.png\" alt=\"index\" />\n                        </div>\n                    })}\n                    {isTreePreviewShowen && <TreePreview tree={currentPreviewTree} querySurveyTrees={querySurveyTrees} />}\n                </div>}\n            </div>\n        </section>\n    )\n}","import React, { useEffect, useRef, useState } from \"react\"\nimport { useParams, useHistory } from \"react-router\"\nimport { treeService } from \"../services/treeService\"\nimport { useForm, useHandleModal } from '../services/customHooks'\nimport { Button, MenuItem, Select, FormControl } from '@material-ui/core';\nimport { formService } from '../services/formService';\n// import { CloudinaryUpload } from './CloudinaryUpload';\nimport { useSelector } from 'react-redux';\nimport { FormAutocomplete } from '../cmps/FormAutocomplete';\nimport Input from '../cmps/form/input';\nimport { storageService } from '../services/storageService';\nimport FormModal from '../cmps/form/FormModal';\n\nexport const TreeUpdate = () => {\n\n    const params = useParams()\n    let history = useHistory()\n\n    const { currentSurvey } = useSelector(state => state.TreeModule)\n    const { loggedInUser } = useSelector(state => state.appModule)\n    const childRef = useRef();\n\n    const [tree, setTree] = useState({})\n    const [surveyId, setSurveyId] = useState('')\n    const [treeTypeOptions, setTreeTypeOptions] = useState([])\n    const [treeType, setType] = useState({})\n    // const [imgUrl, setImgUrl] = useState('')\n\n    useEffect(() => {\n        (async () => {\n            const treeById = await treeService.getTreeById(params.treeId, loggedInUser.username)\n            setTree(treeById)\n        })()\n    }, [])\n\n    useEffect(() => {\n        if (surveyId) {\n            if (Object.keys(surveyId).length === 0) {\n                let storageId = storageService.loadFromStorage('surveyId')\n                if (storageId) {\n                    setSurveyId(storageId)\n                }\n            }\n        }\n    }, [surveyId])\n\n    useEffect(() => {\n        setTreeTypeOptions(formService.treeTypes)\n        setSurveyId(currentSurvey?.surveyTitle)\n        setInputRef()\n        setTextAreaRef()\n\n    }, [tree])\n\n\n    const validate = (fieldValues = values) => {\n        let temp = { ...errors }\n        if ('health' in fieldValues)\n            temp.health = isLessThenFiveInput(fieldValues.health) || isEmptyInput(fieldValues.health)\n        if ('canopy' in fieldValues)\n            temp.canopy = isLessThenFiveInput(fieldValues.canopy) || isEmptyInput(fieldValues.canopy)\n        if ('location' in fieldValues)\n            temp.location = isLessThenFiveInput(fieldValues.location) || isEmptyInput(fieldValues.location)\n        if ('mobile' in fieldValues)\n            temp.mobile = isLessThenFiveInput(fieldValues.mobile) || isEmptyInput(fieldValues.mobile)\n        if ('quantity' in fieldValues)\n            temp.quantity = isEmptyInput(fieldValues.quantity)\n        if ('idx' in fieldValues)\n            temp.idx = isEmptyInput(fieldValues.idx)\n        if ('diameter' in fieldValues)\n            temp.diameter = isEmptyInput(fieldValues.diameter)\n        if ('height' in fieldValues)\n            temp.height = isEmptyInput(fieldValues.height)\n        if ('rootsDiameter' in fieldValues)\n            temp.rootsDiameter = isEmptyInput(fieldValues.rootsDiameter)\n        if ('movingPossibility' in fieldValues)\n            temp.movingPossibility = isEmptyInput(fieldValues.movingPossibility)\n        if ('description' in fieldValues)\n            temp.description = isEmptyInput(fieldValues.description)\n        if ('movingReason' in fieldValues)\n            temp.movingReason = isEmptyInput(fieldValues.movingReason)\n        if ('recommendation' in fieldValues)\n            temp.recommendation = isEmptyInput(fieldValues.recommendation)\n\n        setErrors({\n            ...temp\n        })\n\n        if (tree === values)\n            return Object.values(temp).every(x => x === \"\")\n    }\n\n    const isLessThenFiveInput = (field) => {\n        return (field <= 5 && field >= 0) ? \"\" : \"קלט צריך להיות בין 0 ל 5\"\n    }\n\n    const isEmptyInput = (field) => {\n        const length = (field + '').length\n        return (length > 0) ? \"\" : \"הכנס ערך\"\n    }\n\n    const {\n        values,\n        errors,\n        setErrors,\n        handleInputChange,\n    } = useForm(tree, true, validate);\n\n    const [isModalShown, HandleIsModalShown] = useHandleModal({\n        health: '',\n        location: '',\n        canopy: '',\n        isAddingTree: ''\n    })\n\n    const setInputRef = () => {\n        const inputsRef = document.querySelectorAll('input')\n        inputsRef.forEach(input => {\n            const name = input.name\n            input.value = (name === 'type') ? tree.type?.label : tree[name]\n        })\n    }\n    const setTextAreaRef = () => {\n        const textareasRef = document.querySelectorAll('textarea')\n        textareasRef.forEach(textarea => {\n            const name = textarea.name\n            textarea.value = tree[name]\n        })\n    }\n\n\n\n    // const onGetImgUrl = (img) => {\n    //     setImgUrl(img)\n    // }\n\n    const onSetTreeType = (treeTypeObj) => {\n        setType(treeTypeObj);\n    }\n\n    const setIsPalmTree = (ev) => {\n        handleInputChange(ev)\n        if (ev.target.checked) {\n            setTreeTypeOptions(formService.palmstreeTypes)\n        }\n        else {\n            setTreeTypeOptions(formService.treeTypes)\n        }\n    }\n\n    const submitForm = (ev) => {\n        ev.preventDefault()\n        const mergeTree = { ...tree, type: treeType, ...values }\n        treeService.save(mergeTree, loggedInUser)\n        history.goBack()\n    }\n\n    return (\n        <div className=\"main-container\">\n            <h1>עדכן עץ</h1>\n            <div className=\"form-container\">\n                <form dir=\"rtl\" action=\"#\" onSubmit={(ev) => submitForm(ev)}>\n                    <div className=\"trees-form flex column\">\n                        <div className=\"type-form \">\n                            <label htmlFor=\"isPalmTree rtl\">\n                                <input type=\"checkbox\" name=\"isPalmTree\" id=\"isPalmTree\" onChange={(ev) => { setIsPalmTree(ev) }} />\n                                עץ דקל\n                            </label>\n                            <FormAutocomplete ref={childRef} tree={tree.type} options={treeTypeOptions} onSetTreeType={onSetTreeType} />\n                        </div>\n                        <div className=\"input-container\">\n                            <p>מספר עץ</p>\n                            <Input\n                                error={errors.idx}\n                                name=\"idx\"\n                                value={values.idx}\n                                onChange={handleInputChange} />\n                        </div>\n                        <div className=\"input-container\">\n                            <p>כמות עצים</p>\n                            <Input\n                                error={errors.quantity}\n                                value={values.quantity}\n                                name=\"quantity\"\n                                onChange={handleInputChange} />\n                        </div>\n                        <div className=\"input-container\">\n                            <p>קוטר הגזע</p>\n                            <Input\n                                error={errors.diameter}\n                                value={values.diameter}\n                                placeholder=\"קוטר בס״מ של הגזע\"\n                                name=\"diameter\"\n                                variant=\"standard\"\n                                onChange={handleInputChange} />\n                        </div>\n\n                        <div className=\"input-container\">\n                            <p onClick={() => HandleIsModalShown('health', !isModalShown.health)} >*מצב בריאותי</p>\n                            <Input\n                                error={errors.health}\n                                value={values.health}\n                                InputProps={{\n                                    inputProps: {\n                                        max: 5,\n                                        min: 0\n                                    }\n                                }}\n                                placeholder=\"0-5\"\n                                id=\"health\"\n                                name=\"health\"\n                                variant=\"standard\"\n                                onChange={handleInputChange} />\n                            {isModalShown.health &&\n                                <FormModal\n                                    HandleiIsModalShown={HandleIsModalShown}\n                                    modal={{\n                                        type: 'health',\n                                        isShowen: isModalShown.health\n                                    }}\n                                    imgSrc=\"/imgs/modal/healthModal.png\" />}\n                        </div>\n                        <div className=\"input-container\">\n                            <p>גובה העץ</p>\n                            <Input\n                                error={errors.height}\n                                name=\"height\"\n                                variant=\"standard\"\n                                placeholder=\"גובה העץ במטרים\"\n                                onChange={handleInputChange} />\n                        </div>\n                        <div className=\"input-container\">\n                            <p onClick={() => HandleIsModalShown('location', !isModalShown.location)} > *מיקום העץ</p>\n\n                            <Input\n                                error={errors.location}\n                                placeholder=\"0-5\"\n                                InputProps={{\n                                    inputProps: {\n                                        max: 5,\n                                        min: 0\n                                    }\n                                }}\n                                id=\"location\"\n                                name=\"location\"\n                                onChange={handleInputChange} />\n\n                            {isModalShown.location &&\n                                <FormModal\n                                    HandleiIsModalShown={HandleIsModalShown}\n                                    modal={{\n                                        type: 'location',\n                                        isShowen: isModalShown.location\n                                    }}\n                                    imgSrc=\"/imgs/modal/locationModal.png\" />}\n                        </div>\n                        <div className=\"input-container\">\n                            <p onClick={() => HandleIsModalShown('canopy', !isModalShown.canopy)} >*ניקוד חופת העץ</p>\n                            <Input\n                                error={errors.canopy}\n                                placeholder=\"0-5\"\n                                InputProps={{\n                                    inputProps: {\n                                        max: 5,\n                                        min: 0\n                                    }\n                                }}\n                                id=\"canopy\"\n                                name=\"canopy\"\n                                onChange={handleInputChange} />\n                            {isModalShown.canopy &&\n                                <FormModal\n                                    HandleiIsModalShown={HandleIsModalShown}\n                                    modal={{\n                                        type: 'canopy',\n                                        isShowen: isModalShown.canopy\n                                    }}\n                                    imgSrc=\"/imgs/modal/canopyModal.png\" />}\n                        </div>\n                        <div className=\"input-container\">\n                            <p>אזור שורשים מוגן</p>\n                            <Input\n                                error={errors.rootsDiameter}\n                                placeholder=\"אזור שורשים מוגן במטרים\"\n                                id=\"rootsDiameter\"\n                                name=\"rootsDiameter\"\n                                onChange={handleInputChange} />\n                        </div>\n                        <div className=\"input-container\">\n                            <p>היתכנות העתקה</p>\n                            <FormControl\n                                 className=\"update-select\"\n                             >\n                                <Select\n                                    // error={errors.movingPossibility}\n                                    type=\"text\"\n                                    id=\"movingPossibility\"\n                                    name=\"movingPossibility\"\n                                    value={values.movingPossibility}\n                                  \n                                    onChange={handleInputChange}>\n                                    {formService.movingPossibility.map((option) => (\n                                        <MenuItem\n                                    \n                                            key={option.label}\n                                            value={option.label}>\n                                            {option.label}\n                                        </MenuItem>\n                                    ))}\n                                </Select>\n                            </FormControl>\n                        </div>\n                        <div className=\"input-container\">\n                            <p>המלצה</p>\n                            <FormControl \n                                 className=\"update-select\"\n                                 >\n                                <Select\n                                    // error={errors.recommendation}\n                                    type=\"text\"\n                                    id=\"recommendation\"\n                                    name=\"recommendation\"\n                                    value={values.recommendation}\n                                    onChange={handleInputChange}>\n                                    {formService.recomandationOptions.map((option) => (\n                                        <MenuItem\n                                            key={option.label}\n                                            value={option.label}>\n                                            {option.label}\n                                        </MenuItem>\n                                    ))}\n                                </Select>\n                            </FormControl>\n                        </div>\n                        <div className=\"input-container\">\n                            <p>סיבת כריתה או\n                                העתקת\n                                העץ</p>\n                            <Input\n                                error={errors.movingReason}\n                                multiline\n                                rows={2}\n                                type=\"text\"\n                                id=\"movingReason\"\n                                name=\"movingReason\"\n                                onChange={handleInputChange} />\n                        </div>\n                        <div className=\"input-container\">\n                            <p>הערות</p>\n                            <Input\n                                error={errors.description}\n                                multiline\n                                rows={2}\n                                type=\"text\"\n                                id=\"description\"\n                                name=\"description\"\n                                onChange={handleInputChange} />\n                        </div>\n                    </div>\n                    {/* <CloudinaryUpload onGetImgUrl={onGetImgUrl} /> */}\n                    <Button style={{ marginBottom: '20px' }} onClick={(ev) => submitForm(ev)} color=\"primary\" variant=\"outlined\">עדכן עץ</Button>\n                    {isModalShown.isAddingTree &&\n                        <div\n                            onClick={() => { HandleIsModalShown(!isModalShown.health) }}\n                            className=\"adding-modal\">\n                            <div className=\"background\"></div>\n                            <h1>העץ נוסף בהצלחה!</h1>\n                        </div>}\n                </form>\n            </div>\n        </div>\n    )\n\n}","import React, { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { useHistory } from 'react-router-dom'\n\nexport function Home() {\n    const { loggedInUser, loginErr } = useSelector(state => state.appModule)\n    const history = useHistory()\n\n    useEffect(() => {\n        // console.log(loggedInUser);\n        // if (!loggedInUser) history.push('/login')\n    }, [])\n\n    return (\n        <section className=\"home-container flex \">\n            {/* <></> */}\n            <Link to=\"/create_survey\" >\n                <div className=\"new-survey\">סקר חדש</div>\n            </Link>\n\n            <Link to=\"/choose_survey\" >\n                <div className=\"existing-survey\">בחר סקר</div>\n            </Link>\n        </section>\n\n    )\n}","import React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux'\nimport { Link, useHistory } from 'react-router-dom'\n// import { GoogleLogin } from 'react-google-login'\nimport { useDispatch } from 'react-redux';\nimport { onLogin } from '../actions/appActions'\nimport * as Yup from 'yup';\nimport { Formik, Field, Form, ErrorMessage } from 'formik';\nimport { storageService } from '../services/storageService';\n\n\nexport function Login() {\n\n  const { loginErr } = useSelector(state => state.appModule)\n  const history = useHistory()\n  // const location = useLocation()\n  const dispatch = useDispatch()\n\n  const credentials = {\n    username: '',\n    password: ''\n  }\n\n  useEffect(() => {\n    console.log('loginErr', loginErr);\n  }, [loginErr])\n\n  const onSubmit = (values) => {\n    const storageLocalUser = {}\n    storageLocalUser.username = values.username\n    storageService.saveToStorage('surveyId', null) // Reset current survey\n    storageService.saveToStorage('loggedinUser', storageLocalUser) // Reset current survey\n    dispatch(onLogin(values))\n    history.push('/')\n  }\n\n  const validate = Yup.object({\n    username: Yup.string()\n      .min(4, 'Must be 4 or more')\n      .max(15, 'Must be 15 characters or less')\n      .required('Required'),\n    password: Yup.string()\n      .min(6, 'Must be 6 or more')\n      .max(20, 'Must be 20 characters or less')\n      .required('Required')\n  })\n\n  // const onSuccessGoogle = (res) => {\n  //   const { tokenId } = res\n  //   // const { onGoogleLogin } = this.props\n  //   onGoogleLogin(tokenId)\n  // }\n  // const onFailureGoogle = (res) => {\n  //   console.log('Login with google failed', res)\n  // }\n\n  return (\n    <section className=\"login-signup-container\">\n      <div className=\"login-signup \">\n        <Formik\n          initialValues={credentials}\n          validationSchema={validate}\n          onSubmit={(values) => {\n            onSubmit(values)\n          }} >\n          <Form className=\"flex column\">\n            <ErrorMessage name=\"username\" component=\"div\" />\n            <Field type=\"username\" placeholder=\"Enter username\" name=\"username\" autoFocus />\n            <ErrorMessage name=\"password\" component=\"div\" />\n            <Field type=\"password\" placeholder=\"Enter password\" name=\"password\" />\n            <button type=\"submit\" className=\"primary-btn login-signup-btn\">Log in</button>\n            {loginErr && <div className=\"err-msg\">שם משתמש או סיסמא לא נכונים</div>}\n          </Form>\n        </Formik>\n        <hr />\n        <Link to=\"/signup\">? עדיין לא רשום</Link>\n      </div>\n    </section>\n  )\n\n}\n\n","import React from 'react';\n// import { useSelector } from 'react-redux'\nimport { Link, useHistory } from 'react-router-dom'\n// import { GoogleLogin } from 'react-google-login'\nimport { useDispatch } from 'react-redux';\nimport {  onSignup, } from '../actions/appActions'\nimport * as Yup from 'yup';\nimport { Formik, Field, Form, ErrorMessage } from 'formik';\n\n\nexport function Signup() {\n\n    // const { loggedInUser } = useSelector(state => state.appModule)\n    const history = useHistory()\n    const dispatch = useDispatch()\n\n    const userInfo = {\n        fullname: '',\n        username: '',\n        password: '',\n        imgUrl: ''\n    }\n    const validate = Yup.object({\n        fullname: Yup.string()\n            .min(4, 'Must be 4 or more')\n            .max(15, 'Must be 15 characters or less')\n            .required('Required'),\n        username: Yup.string()\n            .min(4, 'Must be 4 or more')\n            .max(15, 'Must be 15 characters or less')\n            .required('Required'),\n        password: Yup.string()\n            .min(6, 'Must be 6 or more')\n            .max(20, 'Must be 20 characters or less')\n            .required('Required')\n    })\n\n    // const onSuccessGoogle = (res) => {\n    //     const { tokenId } = res\n    //     // const { onGoogleLogin } = this.props\n    //     onGoogleLogin(tokenId)\n    // }\n\n    // const onFailureGoogle = (res) => {\n    //     console.log('Login with google failed', res)\n    // }\n\n    const onSubmit = (values) => {\n        dispatch(onSignup(values))\n        history.push('/')\n    }\n\n\n    return (\n        <section className=\"login-signup-container\">\n            <div className=\"login-signup \">\n                <Formik\n                    initialValues={userInfo}\n                    validationSchema={validate}\n                    onSubmit={(values) => {\n                        onSubmit(values)\n                    }} >\n                    <Form className=\"flex column\">\n                        <div className=\"flex\">\n                            <Field type=\"fullname\" placeholder=\"Enter fullname\" name=\"fullname\" autoFocus />\n                            <ErrorMessage name=\"fullname\" component=\"p\" />\n                        </div>\n                        <div className=\"flex\">\n                            <Field type=\"username\" placeholder=\"Enter username\" name=\"username\" autoFocus />\n                            <ErrorMessage name=\"username\" component=\"p\" />\n                        </div>\n                        <div className=\"flex\">\n                            <Field type=\"password\" placeholder=\"Enter password\" name=\"password\" />\n                            <ErrorMessage name=\"password\" component=\"p\" />\n                        </div>\n                        <button type=\"submit\" className=\"primary-btn login-signup-btn\">Signup</button>\n                    </Form>\n                </Formik>\n                <hr />\n                <Link to=\"/login\">? משתמש רשום</Link>\n            </div>\n        </section>\n    )\n\n}\n\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { AppHeader } from './cmps/AppHeader'\nimport './assets/main.css'\nimport './assets/style/main.scss'\nimport { About } from './pages/About';\nimport { FinalSurvey } from './pages/FinalSurvey';\nimport { ChooseSurvey } from './pages/ChooseSurvey';\nimport { CreateSurvey } from './pages/CreateSurvey';\nimport { SurveyEditor } from './pages/SurveyEditor';\nimport { TreeUpdate } from './pages/TreeUpdate';\nimport { Home } from './pages/Home';\nimport { Login } from './cmps/Login';\nimport { Signup } from './cmps/Signup';\n\nfunction App() {\n  return (\n    <div id=\"swup\" className=\"transition content-wrapper\">\n      <AppHeader />\n      <Switch> \n        <Route path=\"/about\" component={About} />\n        <Route path=\"/trees\" component={FinalSurvey} />\n        <Route path=\"/tree_update/:treeId\" component={TreeUpdate} />\n        <Route path=\"/survey_editor\" component={SurveyEditor} />\n        <Route path=\"/choose_survey\" component={ChooseSurvey} />\n        <Route path=\"/create_survey\" component={CreateSurvey} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/signup\" component={Signup} />\n        <Route path=\"/\" component={Home} />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport TreeReducer from './reducers/TreeReducer';\r\nimport  { AppReducer } from './reducers/AppReducer';\r\nimport App from './App';\r\n\r\nconst rootReducer = combineReducers({\r\n    TreeModule: TreeReducer,\r\n    appModule: AppReducer,\r\n});\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Router>\r\n            <App />\r\n        </Router>\r\n    </Provider>,\r\n    document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n\r\n"],"sourceRoot":""}