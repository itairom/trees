(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[4],{385:function(e,t){},458:function(e,t){},459:function(e,t){},489:function(e,t){},491:function(e,t){},501:function(e,t){},503:function(e,t){},530:function(e,t){},532:function(e,t){},533:function(e,t){},538:function(e,t){},540:function(e,t){},546:function(e,t){},548:function(e,t){},567:function(e,t){},579:function(e,t){},582:function(e,t){},589:function(e,t,a){"use strict";a.r(t),a.d(t,"FinalSurvey",(function(){return k})),a.d(t,"default",(function(){return w}));var n=a(4),l=a.n(n),r=a(9),c=a(8),i=a(0),u=a.n(i),m=function(){var e=arguments.length<=0?void 0:arguments[0],t=e.trees;return u.a.createElement("section",{className:"trees-images flex"},null===t||void 0===t?void 0:t.map((function(e){return u.a.createElement("div",{key:e._id,className:"image-card pointer"},u.a.createElement("p",null,e.idx),""!==e.imgUrl&&u.a.createElement("img",{key:e._id,src:e.imgUrl,alt:"tree"}),""===e.imgUrl&&u.a.createElement("img",{key:e._id,src:"imgs/tree_silhouette.png",alt:"tree"}))})))},o=a(49),s=a(10),E=a(24),d=Object(i.memo)((function(e){var t=e.trees,a=Object(i.useState)([]),n=Object(c.a)(a,2),l=n[0],r=n[1],m=Object(i.useState)([]),o=Object(c.a)(m,2),s=o[0],E=o[1],d=Object(i.useState)({}),f=Object(c.a)(d,2),p=f[0],v=f[1];Object(i.useEffect)((function(){b(t)}),[t]);var y=function(e){var t=function(e){var t=e.canopy,a=e.location,n=e.health;return+t+ +e.type.typeValue+ +a+ +n}(e);return t<=6?"lowPriority":t>6&&14>t?"mediumPriority":t>13&&17>t?"highPriority":"veryHighPriority"},b=function(e){for(var t={lowPriority:0,mediumPriority:0,highPriority:0,veryHighPriority:0},a={},n=0;n<(null===e||void 0===e?void 0:e.length);n++){var l=e[n].type.label,c=y(e[n]);if(!a.hasOwnProperty(l))a[e[n].type.label]={highPriority:0,lowPriority:0,mediumPriority:0,veryHighPriority:0,total:0};++t[c],++a[l][c],++a[l].total}var i=Object.keys(a),u=Object.values(a);r(u),E(i),v(t)};return u.a.createElement("section",{className:"trees-table flex"},u.a.createElement("table",null,u.a.createElement("thead",null,u.a.createElement("tr",{key:"tree-type-header"},u.a.createElement("th",{className:"white"},"\u05de\u05d9\u05df \u05d4\u05e2\u05e5/\u05ea\u05d0\u05d5\u05e8 \u05d4\u05e4\u05d5\u05dc\u05d9\u05d2\u05d5\u05df"),u.a.createElement("th",{className:"red"},"\u05e2\u05e8\u05db\u05d9\u05d5\u05ea \u05d2\u05d1\u05d5\u05d4\u05d4 \u05de\u05d0\u05d5\u05d3 **"),u.a.createElement("th",{className:"green"},"\u05e2\u05e8\u05db\u05d9\u05d5\u05ea \u05d2\u05d1\u05d5\u05d4\u05d4 **"),u.a.createElement("th",{className:"grey"},"\u05e2\u05e8\u05db\u05d9\u05d5\u05ea \u05d1\u05d9\u05e0\u05d5\u05e0\u05d9\u05ea **"),u.a.createElement("th",{className:"yellow"},"\u05e2\u05e8\u05db\u05d9\u05d5\u05ea \u05e0\u05de\u05d5\u05db\u05d4 **"),u.a.createElement("th",{className:"white"},"\u05e1\u05d4\u05f4\u05db"))),u.a.createElement("tbody",null,s&&(null===l||void 0===l?void 0:l.map((function(e,t){return u.a.createElement("tr",{key:"tree-type-"+t},u.a.createElement("td",null,s[t]),u.a.createElement("td",null,e.veryHighPriority),u.a.createElement("td",null,e.highPriority),u.a.createElement("td",null,e.mediumPriority),u.a.createElement("td",null,e.lowPriority),u.a.createElement("td",null,e.total))}))),u.a.createElement("tr",{key:"total-values"},u.a.createElement("td",null,"\u05e1\u05d4\u05f4\u05db"),u.a.createElement("td",null,p.veryHighPriority),u.a.createElement("td",null,p.highPriority),u.a.createElement("td",null,p.mediumPriority),u.a.createElement("td",null,p.lowPriority),u.a.createElement("td",null,Object.values(p).reduce((function(e,t){return e+t}),0))))))})),f=a(6),p=a(382),v=a.n(p),y=a(460),b=a(14),h=a(66),g=a(587),j=a(32),O=a(461),N=a.n(O),x=(N.a.ExcelFile,N.a.ExcelFile.ExcelSheet,function(e){var t=e.trees,a=Object(i.useState)(!1),n=Object(c.a)(a,2),l=(n[0],n[1]),r=Object(i.useState)(t),m=Object(c.a)(r,2),o=m[0],E=m[1],d=Object(b.f)(),p=Object(s.d)((function(e){return e.appModule})).loggedInUser,O=Object(s.d)((function(e){return e.TreeModule})).survey,N=Object(h.a)(),x=Object(s.c)();Object(i.useEffect)((function(){t&&E(t)}),[t]),Object(i.useEffect)((function(){N.width<500?l(!0):l(!1)}),[N]),Object(i.useEffect)((function(){var e=Object(f.a)({},O);e.surveyTrees=o,t&&x(Object(j.d)(e,p))}),[o]);var P=function(e){var t=e.canopy,a=e.location,n=e.health;return+t+ +e.type.typeValue+ +a+ +n},k=function(e){var t=e.location*+e.type.typeValue*e.health/5*(3.14*Math.pow(e.diameter/2,2))/5*20;return e.quantity*t.toFixed(2)},w=Object(i.useCallback)((function(e){console.log("\u2702\ufe0f\u2702\ufe0f\u2702\ufe0f\u2702\ufe0f\u2702\ufe0f\u2702\ufe0f\u2702\ufe0f\u2702\ufe0f"),k(e)}),[t]),T=function(e){var t=e.height*(e.location/5*+e.type.typeValue/5*+e.health/5)*1500;return e.quantity*t.toFixed(2)},_=Object(i.useCallback)((function(e){T(e)}),[t]),S=function(e){var t=P(e);return t<=6?"yellow":t>6&&14>t?"grey":t>13&&17>t?"green":"red"},C=function(e){var t=o.filter((function(t){return t._id!==e}));E(t)};function F(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n<e.length;n++)a[n]=255&e.charCodeAt(n);return t}return u.a.createElement("section",{className:"trees-table "},u.a.createElement("table",{id:"main-table"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"\u05de\u05e1\u05e4\u05e8 \u05d4\u05e2\u05e5/\u05e4\u05d5\u05dc\u05d9\u05d2\u05d5\u05df "),u.a.createElement("th",null,"\u05de\u05d9\u05df \u05d4\u05e2\u05e5/\u05ea\u05d0\u05d5\u05e8 \u05d4\u05e4\u05d5\u05dc\u05d9\u05d2\u05d5\u05df"),u.a.createElement("th",null,"\u05db\u05de\u05d5\u05ea \u05e2\u05e6\u05d9\u05dd"),u.a.createElement("th",null,"**\u05d2\u05d5\u05d1\u05d4 \u05d4\u05e2\u05e5 (\u05de')"),u.a.createElement("th",null,'*\u05e7\u05d5\u05d8\u05e8 \u05d2\u05d6\u05e2 (\u05e1"\u05de)'),u.a.createElement("th",null,"\u05de\u05e6\u05d1 \u05d1\u05e8\u05d9\u05d0\u05d5\u05ea\u05d9 (0-5)"),u.a.createElement("th",null,"\u05de\u05d9\u05e7\u05d5\u05dd \u05d4\u05e2\u05e5 (0-5)"),u.a.createElement("th",null,"\u05e2\u05e8\u05da \u05de\u05d9\u05df \u05d4\u05e2\u05e5 (0-5)"),u.a.createElement("th",null,"\u05e0\u05d9\u05e7\u05d5\u05d3 \u05d7\u05d5\u05e4\u05ea \u05d4\u05e2\u05e5 (0-5)"),u.a.createElement("th",null,"\u05e1\u05da \u05e2\u05e8\u05db\u05d9\u05d5\u05ea \u05d4\u05e2\u05e5/\u05e4\u05d5\u05dc\u05d9\u05d2\u05d5\u05df (0-20)"),u.a.createElement("th",null,"***\u05d0\u05d6\u05d5\u05e8 \u05e9\u05d5\u05e8\u05e9\u05d9\u05dd \u05de\u05d5\u05d2\u05df \u05e8\u05d3\u05d9\u05d5\u05e1 \u05d1\u05de'"),u.a.createElement("th",null,"\u05e9\u05d5\u05d5\u05d9 \u05d4\u05e2\u05e6\u05d9\u05dd \u05d1 \u20aa"),u.a.createElement("th",null,"\u05d4\u05d9\u05ea\u05db\u05e0\u05d5\u05ea \u05d4\u05e2\u05ea\u05e7\u05d4 "),u.a.createElement("th",null,"\u05d4\u05e2\u05e8\u05d5\u05ea"),u.a.createElement("th",null,"\u05d4\u05de\u05dc\u05e6\u05d5\u05ea"),u.a.createElement("th",null,"\u05e1\u05d9\u05d1\u05ea \u05db\u05e8\u05d9\u05ea\u05d4 \u05d0\u05d5 \u05d4\u05e2\u05ea\u05e7\u05ea \u05d4\u05e2\u05e5"))),u.a.createElement(g.a,{onDragEnd:function(e){if(e.destination){var t=Array.from(o),a=t.splice(e.source.index,1),n=Object(c.a)(a,1)[0];t.splice(e.destination.index,0,n),E(t)}}},u.a.createElement(g.c,{droppableId:"trees-desktop"},(function(e){return u.a.createElement("tbody",Object.assign({},e.droppableProps,{ref:e.innerRef}),null===o||void 0===o?void 0:o.map((function(e,t){return u.a.createElement(g.b,{key:e._id,draggableId:e._id,index:t},(function(t){return u.a.createElement("tr",Object.assign({style:{backgroundColor:"red !important",position:"absolute"}},t.draggableProps,t.dragHandleProps,{ref:t.innerRef}),e.idx&&u.a.createElement("td",null,e.idx),u.a.createElement("td",null,e.type.label),u.a.createElement("td",null,e.quantity),u.a.createElement("td",null,e.height),u.a.createElement("td",null,e.diameter),u.a.createElement("td",null,e.health),u.a.createElement("td",null,e.location),u.a.createElement("td",null,e.type.typeValue),u.a.createElement("td",null,e.canopy),u.a.createElement("td",{className:S(e)},P(e)),u.a.createElement("td",null,e.rootsDiameter),!e.isPalmTree&&u.a.createElement("td",null,w(e)),e.isPalmTree&&u.a.createElement("td",null,_(e)),u.a.createElement("td",null,e.movingPossibility),u.a.createElement("td",null,e.description),u.a.createElement("td",{className:(a=e.recommendation,"\u05db\u05e8\u05d9\u05ea\u05d4"===a?"yellow":"\u05e9\u05d9\u05de\u05d5\u05e8"===a?"red":"\u05d4\u05e2\u05ea\u05e7\u05d4"===a?"orange":"blue")},e.recommendation),u.a.createElement("td",null,e.movingReason),u.a.createElement("td",null,u.a.createElement("div",{onClick:function(){d.push("tree_update/".concat(e._id))},className:"edit-btn btn"},"\u05e2\u05e8\u05d9\u05db\u05d4"),u.a.createElement("div",{onClick:function(){C(e._id)},className:"delete-btn btn"},"\u05de\u05d7\u05d9\u05e7\u05d4")));var a}))})))})))),u.a.createElement("button",{className:"download-table",onClick:function(){var e=v.a.utils.table_to_book(document.querySelector("#main-table"),{sheet:"sheetJs"}),t=v.a.write(e,{bookType:"xlsx",bookSST:!0,type:"binary"});Object(y.saveAs)(new Blob([F(t)],{type:"application/octet-stream"}),"\u05e1\u05e7\u05e8 ".concat(O.surveyInfo.surveyTitle,".xlsx"))}},"\u05d4\u05d5\u05e8\u05d3\u05d4"),u.a.createElement("section",{className:"mobile-table"},null===t||void 0===t?void 0:t.map((function(e,t){return u.a.createElement("div",{className:"mobile-tree-card",key:e._id},u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05d0\u05d9\u05e0\u05d3\u05e7\u05e1"),u.a.createElement("p",null,e.idx)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05e1\u05d5\u05d2 \u05e2\u05e5"),u.a.createElement("p",null,e.type.label)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null," \u05db\u05de\u05d5\u05ea"),u.a.createElement("p",null,e.quantity)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05d2\u05d5\u05d1\u05d4"),u.a.createElement("p",null,e.height)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05e7\u05d5\u05d8\u05e8"),u.a.createElement("p",null,e.diameter)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05de\u05e6\u05d1 \u05d1\u05e8\u05d9\u05d0\u05d5\u05ea\u05d9"),u.a.createElement("p",null,e.health)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05de\u05d9\u05e7\u05d5\u05dd"),u.a.createElement("p",null,e.location)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05e2\u05e8\u05da \u05e2\u05e5"),u.a.createElement("p",null,e.type.typeValue)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05e0\u05d9\u05e7\u05d5\u05d3 \u05d7\u05d5\u05e4\u05ea \u05e2\u05e5"),u.a.createElement("p",null,e.canopy)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05e2\u05e8\u05da \u05e2\u05e5"),u.a.createElement("p",{className:S(e)},P(e))),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05e7\u05d5\u05d8\u05e8 \u05e9\u05d5\u05e8\u05e9\u05e8\u05d9\u05dd"),u.a.createElement("p",null,e.rootsDiameter)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05e9\u05d5\u05d5\u05d9 \u05db\u05e1\u05e4\u05d9"),!e.isPalmTree&&u.a.createElement("p",null,k(e)),e.isPalmTree&&u.a.createElement("p",null,T(e))),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05d0\u05e4\u05e9\u05e8\u05d5\u05ea \u05d4\u05e2\u05ea\u05e7\u05d4"),u.a.createElement("p",null,e.movingPossibility)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05ea\u05d9\u05d0\u05d5\u05e8"),u.a.createElement("p",{"aria-multiline":"true"},e.description)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05d4\u05de\u05dc\u05e6\u05d4"),u.a.createElement("p",null,e.recommendation)),u.a.createElement("div",{className:"flex"},u.a.createElement("p",null,"\u05e1\u05d9\u05d1\u05ea \u05d4\u05e2\u05d1\u05e8\u05d4"),u.a.createElement("p",null,e.movingReason)),u.a.createElement("div",{onClick:function(){d.push("tree_update/".concat(e._id))},className:"edit-btn btn"},"\u05e2\u05e8\u05d9\u05db\u05d4"),u.a.createElement("div",{onClick:function(){C(e._id)},className:"delete-btn btn"},"\u05de\u05d7\u05d9\u05e7\u05d4"))}))))});function P(e){var t=e.trees,a=Object(i.useState)({}),n=Object(c.a)(a,2),l=n[0],r=n[1];Object(i.useEffect)((function(){m()}),[t]),Object(i.useEffect)((function(){}),[l]);var m=function(){var e={preserve:0,relocation:0,amputation:0,notDefined:0,total:0};t&&(t.forEach((function(t){var a=function(e){switch(e){case"\u05e9\u05d9\u05de\u05d5\u05e8":return"preserve";case"\u05d4\u05e2\u05ea\u05e7\u05d4":return"relocation";case"\u05db\u05e8\u05d9\u05ea\u05d4":return"amputation";default:return"\u05d0\u05d9\u05e0\u05d5 \u05de\u05d5\u05d2\u05d3\u05e8 \u05e2\u05e5 \u05d1\u05d5\u05d2\u05e8"}}(t.recommendation);e[a]++,e.total++})),r(e))},o=function(e){return(e/(null===t||void 0===t?void 0:t.length)*100).toFixed(0)+"%"};return u.a.createElement("section",{className:"tree-recommendation-table trees-table flex cloumn"},u.a.createElement("table",null,u.a.createElement("thead",{className:"green"},u.a.createElement("tr",{className:"green",key:""},u.a.createElement("th",null,"\u05d4\u05de\u05dc\u05e6\u05d4"),u.a.createElement("th",null,"\u05de\u05e1\u05f3 \u05e2\u05e6\u05d9\u05dd"),u.a.createElement("th",null,"\u05e1\u05d4\u05f4\u05db"))),u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("td",null,"\u05e1\u05d4\u05f4\u05db \u05e2\u05e6\u05d9\u05dd \u05dc\u05e9\u05d9\u05de\u05d5\u05e8"),u.a.createElement("td",null,l.preserve),u.a.createElement("td",null,o(l.preserve))),u.a.createElement("tr",null,u.a.createElement("td",null,"\u05e1\u05d4\u05f4\u05db \u05e2\u05e6\u05d9\u05dd \u05dc\u05d4\u05e2\u05ea\u05e7\u05d4"),u.a.createElement("td",null,l.relocation),u.a.createElement("td",null,o(l.relocation))),u.a.createElement("tr",null,u.a.createElement("td",null,"\u05e1\u05d4\u05f4\u05db \u05e2\u05e6\u05d9\u05dd \u05dc\u05db\u05e8\u05d9\u05ea\u05d4"),u.a.createElement("td",null,l.amputation),u.a.createElement("td",null,o(l.amputation))),u.a.createElement("tr",null,u.a.createElement("td",null,'\u05e1\u05d4"\u05db \u05e2\u05e6\u05d9\u05dd \u05d1\u05d5\u05d2\u05e8\u05d9\u05dd \u05d1\u05e9\u05d8\u05d7'),u.a.createElement("td",null,l.total),u.a.createElement("td",null,o(l.total))))))}var k=function(){var e=Object(s.d)((function(e){return e.TreeModule})),t=(e.currentSurvey,e.survey),a=Object(s.d)((function(e){return e.appModule})).loggedInUser,n=Object(i.useState)({}),f=Object(c.a)(n,2),p=f[0],v=f[1],y=Object(i.useState)(""),b=Object(c.a)(y,2),h=(b[0],b[1],Object(s.c)());Object(i.useEffect)((function(){g()}),[a]),Object(i.useEffect)((function(){v(t)}),[t]);var g=function(){var e=Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=E.a.loadFromStorage("surveyId"))&&h(Object(j.a)(t.surveyTitle,a.username));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement("section",{id:"main-survey",className:"main-container  "},u.a.createElement("div",{className:"final-survey"},u.a.createElement(x,{onRemoveTree:function(e){o.a.removeTree(e._id,a.username)},trees:p.surveyTrees}),u.a.createElement("h1",null,"\u05ea\u05de\u05d5\u05e0\u05d5\u05ea"),u.a.createElement(m,{trees:p.surveyTrees}),u.a.createElement("h1",null,'\u05d8\u05d1\u05dc\u05ea \u05e8\u05d9\u05db\u05d5\u05d6 \u05e2\u05e4"\u05d9 \u05de\u05d9\u05e0\u05d9 \u05d4\u05e2\u05e6\u05d9\u05dd '),u.a.createElement(d,{trees:p.surveyTrees}),u.a.createElement("h1",null,"\u05d8\u05d1\u05dc\u05ea \u05e1\u05d9\u05db\u05d5\u05dd \u05d4\u05de\u05dc\u05e6\u05d5\u05ea"),u.a.createElement(P,{trees:p.surveyTrees})))};function w(){return u.a.createElement(k,null)}}}]);
//# sourceMappingURL=4.bc95c496.chunk.js.map